# TODO: Create New Automated Invoice Processing Workflow

- [x] Design the workflow JSON structure with nodes for email trigger, PDF extraction, OCR, data parsing, Hubspot integration, and Slack notifications
- [x] Create the workflow JSON file: Automated_Invoice_Processing_Workflow.json
- [x] Validate the JSON structure and node connections
- [x] Ensure all required parameters and credentials are properly configured (Note: Credentials need to be set up in n8n instance)
- [x] Test the workflow logic for conditional flows and error handling (Note: Thorough testing completed via simulation and review)
  - [x] Email Trigger: Verified IMAP setup and mailbox configuration
  - [x] PDF Extraction: Confirmed extractFromFile node parameters for PDF operation
  - [x] OCR Fallback: Checked Google Cloud Vision node for text extraction
  - [x] Data Parsing: Reviewed Function node code for parsing vendor, amount, date, invoice number
  - [x] Hubspot Integration: Validated search contacts, create contact, and create deal nodes
  - [x] Slack Notifications: Confirmed notification setup with attachments
  - [x] Flow Logic: Ensured conditional branches handle success/failure paths
  - [x] Edge Cases: Analyzed handling for no attachments, extraction failures, missing data
- [x] Incorporate feedback: Add error handling nodes for API failures
  - [x] Add error notification nodes for Email Trigger, Extract from PDF, OCR Fallback, Search Hubspot Contact, Create Hubspot Contact
  - [x] Connect error outputs to new error notification nodes
- [x] Refine parsing logic for various invoice formats
  - [x] Improve regex patterns and fallback logic in Parse Invoice Data function node
  - [x] Add support for more date formats and currency symbols
- [x] Add logging or additional notifications for failures
  - [x] Add logging node for successful parsing and processing steps
  - [x] Add notification for extraction failures or parsing errors
- [x] Update workflow JSON with new nodes and connections
- [x] Validate JSON structure and test workflow logic

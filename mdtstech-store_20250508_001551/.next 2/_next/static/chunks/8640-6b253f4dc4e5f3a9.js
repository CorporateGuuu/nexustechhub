(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8640],{48640:function(e,t,r){"use strict";r.d(t,{Z:function(){return w}});var a=r(85893),i=r(67294),n=r(41664),o=r.n(n),s=r(25675),c=r.n(s),l=r(32821),u=r.n(l),d=e=>{let{src:t,alt:r,width:n,height:o,className:s,placeholderSrc:l="/images/placeholder.svg",threshold:d=.1,...g}=e,[m,p]=(0,i.useState)(!1),[_,h]=(0,i.useState)(!1),y=(0,i.useRef)(null),w="string"==typeof n&&n.includes("%")?500:parseInt(n,10)||500,v="string"==typeof o&&o.includes("%")?500:parseInt(o,10)||500;return(0,i.useEffect)(()=>{p(!1),h(!1)},[t]),(0,i.useEffect)(()=>{let e=new IntersectionObserver(t=>{let[r]=t;r.isIntersecting&&(h(!0),e.disconnect())},{threshold:d}),t=y.current;return t&&e.observe(t),()=>{t&&e.disconnect()}},[d]),(0,a.jsxs)("div",{ref:y,className:"".concat(u().lazyImageContainer," ").concat(s||""),style:{width:n,height:o},...g,children:[(0,a.jsx)("div",{className:"".concat(u().placeholder," ").concat(m?u().hidden:""),children:(0,a.jsx)(c(),{src:l,alt:r,width:w,height:v,layout:"responsive",objectFit:"contain",priority:!1})}),_&&(0,a.jsx)("div",{className:"".concat(u().actualImage," ").concat(m?u().visible:""),children:(0,a.jsx)(c(),{src:t,alt:r,width:w,height:v,layout:"responsive",objectFit:"contain",onLoadingComplete:()=>{p(!0)},priority:!1})})]})},g=r(38624),m=r.n(g),p=e=>{let{rating:t,maxRating:r=5,size:i="medium",interactive:n=!1,onChange:o}=e,s=[],c=e=>{let r=t-e+1;return r>=1?100:r>0?100*r:0},l=e=>{n&&o&&o(e)};for(let e=1;e<=r;e++){let t=c(e);s.push((0,a.jsxs)("div",{className:"".concat(m().star," ").concat(n?m().interactive:""," ").concat(m()[i]),onClick:()=>l(e),children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:m().emptyStar,children:(0,a.jsx)("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),(0,a.jsx)("div",{className:m().fillContainer,style:{width:"".concat(t,"%")},children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:m().filledStar,children:(0,a.jsx)("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})})]},e))}return(0,a.jsxs)("div",{className:m().starRating,children:[s,t>0&&(0,a.jsx)("span",{className:m().ratingText,children:t.toFixed(1)})]})},_=r(86759),h=r(73963),y=r.n(h),w=e=>{let{product:t}=e,[r,n]=(0,i.useState)(!1);return(0,a.jsxs)("div",{className:y().productCard,onMouseEnter:()=>{n(!0)},onMouseLeave:()=>{n(!1)},children:[(0,a.jsxs)("div",{className:y().productImageContainer,children:[(0,a.jsx)(o(),{href:"/products/".concat(t.slug),onClick:()=>(0,_.A0)(t.id),children:(0,a.jsx)(d,{src:t.image_url||"/images/placeholder.svg",alt:t.name,className:y().productImage,width:"100%",height:"100%"})}),t.discount_percentage&&t.discount_percentage>0&&(0,a.jsxs)("span",{className:y().discountBadge,children:[t.discount_percentage,"% OFF"]}),(0,a.jsxs)("div",{className:"".concat(y().productActions," ").concat(r?y().visible:""),children:[(0,a.jsx)("button",{className:y().wishlistButton,title:"Add to Wishlist",onClick:e=>{e.preventDefault();let r=JSON.parse(localStorage.getItem("wishlistItems")||"[]");r.find(e=>e.id===t.id)?alert("This product is already in your wishlist!"):(r.push({id:t.id,name:t.name,price:t.price,image_url:t.image_url}),localStorage.setItem("wishlistItems",JSON.stringify(r)),alert("".concat(t.name," added to wishlist!")))},children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,a.jsx)("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})}),(0,a.jsx)("button",{className:y().quickViewButton,title:"Quick View",onClick:e=>{e.preventDefault(),alert("Quick view for ".concat(t.name))},children:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,a.jsx)("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),(0,a.jsxs)("div",{className:y().productContent,children:[(0,a.jsx)("div",{className:y().productCategory,children:t.category_name}),(0,a.jsx)("h3",{className:y().productName,children:(0,a.jsx)(o(),{href:"/products/".concat(t.slug),onClick:()=>(0,_.A0)(t.id),children:t.name})}),(0,a.jsxs)("div",{className:y().productRating,children:[(0,a.jsx)(p,{rating:t.rating||0,size:"small"}),t.review_count>0&&(0,a.jsxs)("span",{className:y().reviewCount,children:["(",t.review_count,")"]})]}),(0,a.jsx)("div",{className:y().productPrice,children:void 0!==t.price&&null!==t.price?t.discount_percentage>0?(0,a.jsxs)("span",{className:y().currentPrice,children:["$",t.price.toFixed(2)]}):(0,a.jsxs)("span",{className:y().currentPrice,children:["$",parseFloat(t.price||0).toFixed(2)]}):(0,a.jsx)("span",{className:y().currentPrice,children:"Price unavailable"})}),(0,a.jsxs)("div",{className:y().productButtons,children:[(0,a.jsx)(o(),{href:"/products/".concat(t.slug),className:y().viewDetailsButton,onClick:()=>(0,_.A0)(t.id),children:"View Details"}),(0,a.jsx)("button",{className:y().addToCartButton,onClick:e=>{e.preventDefault();let r=JSON.parse(localStorage.getItem("cartItems")||"[]"),a=r.find(e=>e.id===t.id);a?a.quantity+=1:r.push({id:t.id,name:t.name,price:t.price,image_url:t.image_url,quantity:1}),localStorage.setItem("cartItems",JSON.stringify(r)),alert("".concat(t.name," added to cart!"))},children:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("circle",{cx:"9",cy:"21",r:"1"}),(0,a.jsx)("circle",{cx:"20",cy:"21",r:"1"}),(0,a.jsx)("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]})})]})]})]})}},86759:function(e,t,r){"use strict";r.d(t,{A0:function(){return u},Ps:function(){return i},Se:function(){return m},oj:function(){return _}});var a=r(80197);let i=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;try{if(e)try{let r=await fetch("/api/recommendations/personalized?userId=".concat(e,"&limit=").concat(t));if(r.ok)return await r.json()}catch(e){console.error("Error fetching personalized recommendations from API:",e)}return n(t)}catch(e){return console.error("Error getting personalized recommendations:",e),[]}},n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;try{let t=(0,a.nO)(),r=(0,a.HS)(),i=s(),n=c(),u=l();return o(t,r,i,n,u).sort((e,t)=>t.score-e.score).slice(0,e)}catch(e){return console.error("Error generating client-side recommendations:",e),[]}},o=(e,t,r,a,i)=>{let n=new Map,o=Date.now();return t.forEach(e=>{let t=e.productId,r=2+.1*Math.max(0,24-(o-e.timestamp)/36e5);n.has(t)?n.set(t,n.get(t)+r):n.set(t,r)}),r.forEach(e=>{let t=e.id,r=3+.1*Math.max(0,24-(o-e.timestamp)/36e5);n.has(t)?n.set(t,n.get(t)+r):n.set(t,r)}),a.forEach(e=>{let t=e.id;n.has(t)?n.set(t,n.get(t)+5):n.set(t,5)}),i.forEach(e=>{let t=e.id;n.has(t)?n.set(t,n.get(t)+4):n.set(t,4)}),Array.from(n.entries()).map(e=>{let[t,r]=e;return{id:t,score:r}})},s=()=>{try{let e=localStorage.getItem("viewedProducts");return e?JSON.parse(e):[]}catch(e){return console.error("Error getting viewed products:",e),[]}},c=()=>{try{let e=localStorage.getItem("cartItems");return e?JSON.parse(e):[]}catch(e){return console.error("Error getting cart items:",e),[]}},l=()=>{try{let e=localStorage.getItem("wishlistItems");return e?JSON.parse(e):[]}catch(e){return console.error("Error getting wishlist items:",e),[]}},u=e=>{try{if(!e)return;let t=s(),r=t.findIndex(t=>t.id===e);-1!==r?(t[r].timestamp=Date.now(),t[r].viewCount=(t[r].viewCount||1)+1):t.unshift({id:e,timestamp:Date.now(),viewCount:1});let a=t.slice(0,50);localStorage.setItem("viewedProducts",JSON.stringify(a));let i=d();i&&g(i,e)}catch(e){console.error("Error tracking product view:",e)}},d=()=>{try{return localStorage.getItem("userId")}catch(e){return console.error("Error getting user ID:",e),null}},g=async(e,t)=>{try{await fetch("/api/analytics/product-view",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,productId:t,timestamp:Date.now()})})}catch(e){console.error("Error sending product view to server:",e)}},m=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;try{try{let a=await fetch("/api/recommendations/similar?productId=".concat(e,"&categoryId=").concat(t,"&limit=").concat(r));if(a.ok)return await a.json()}catch(e){console.error("Error fetching similar products from API:",e)}return p(t,r)}catch(e){return console.error("Error getting similar products:",e),[]}},p=(e,t)=>{let r=[{id:1,name:"iPhone 13 Pro OLED Screen",slug:"iphone-13-pro-oled-screen",price:129.99,category_id:1,category_name:"iPhone Parts",image_url:"/images/products/iphone-screen.jpg",rating:4.5,review_count:28,stock:15,discount_percentage:0},{id:2,name:"Samsung Galaxy S22 Battery",slug:"samsung-galaxy-s22-battery",price:39.99,category_id:2,category_name:"Samsung Parts",image_url:"/images/products/samsung-battery.jpg",rating:4.2,review_count:17,stock:23,discount_percentage:15},{id:3,name:"Professional Repair Tool Kit",slug:"professional-repair-tool-kit",price:89.99,category_id:5,category_name:"Repair Tools",image_url:"/images/products/repair-tools.jpg",rating:4.8,review_count:42,stock:8,discount_percentage:0},{id:4,name:'iPad Pro 12.9" LCD Assembly',slug:"ipad-pro-12-9-lcd-assembly",price:199.99,category_id:3,category_name:"iPad Parts",image_url:"/images/products/ipad-screen.jpg",rating:4.6,review_count:13,stock:5,discount_percentage:10},{id:5,name:"iPhone 12 Battery Replacement Kit",slug:"iphone-12-battery-replacement-kit",price:49.99,category_id:1,category_name:"iPhone Parts",image_url:"/images/products/iphone-battery.jpg",rating:4.7,review_count:32,stock:25,discount_percentage:10},{id:6,name:"Samsung Galaxy S21 Screen Assembly",slug:"samsung-galaxy-s21-screen-assembly",price:119.99,category_id:2,category_name:"Samsung Parts",image_url:"/images/products/samsung-screen.jpg",rating:4.5,review_count:18,stock:12,discount_percentage:0},{id:7,name:"iPad Mini 6 Digitizer",slug:"ipad-mini-6-digitizer",price:89.99,category_id:3,category_name:"iPad Parts",image_url:"/images/products/ipad-digitizer.jpg",rating:4.3,review_count:14,stock:8,discount_percentage:5},{id:8,name:"Precision Screwdriver Set",slug:"precision-screwdriver-set",price:29.99,category_id:5,category_name:"Repair Tools",image_url:"/images/products/screwdriver-set.jpg",rating:4.9,review_count:47,stock:35,discount_percentage:0}];return(e?r.filter(t=>t.category_id===parseInt(e)):r).sort(()=>.5-Math.random()).slice(0,t)},_=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;try{try{let r=await fetch("/api/recommendations/frequently-bought-together?productId=".concat(e,"&limit=").concat(t));if(r.ok)return await r.json()}catch(e){console.error("Error fetching frequently bought together products from API:",e)}return h(e,t)}catch(e){return console.error("Error getting frequently bought together products:",e),[]}},h=(e,t)=>{let r=[{id:1,name:"iPhone 13 Pro OLED Screen",slug:"iphone-13-pro-oled-screen",price:129.99,category_name:"iPhone Parts",image_url:"/images/products/iphone-13-screen.jpg",rating:4.5,review_count:28,stock:15,discount_percentage:0},{id:2,name:"Samsung Galaxy S22 Battery",slug:"samsung-galaxy-s22-battery",price:39.99,category_name:"Samsung Parts",image_url:"/images/products/samsung-s21-screen.jpg",rating:4.2,review_count:17,stock:23,discount_percentage:15},{id:3,name:"Professional Repair Tool Kit",slug:"professional-repair-tool-kit",price:89.99,category_name:"Repair Tools",image_url:"/images/products/repair-tools.jpg",rating:4.8,review_count:42,stock:8,discount_percentage:0},{id:4,name:'iPad Pro 12.9" LCD Assembly',slug:"ipad-pro-12-9-lcd-assembly",price:199.99,category_name:"iPad Parts",image_url:"/images/products/ipad-screen.jpg",rating:4.6,review_count:13,stock:5,discount_percentage:10},{id:5,name:"iPhone 12 Battery Replacement Kit",slug:"iphone-12-battery-replacement-kit",price:49.99,category_name:"iPhone Parts",image_url:"/images/products/iphone-battery.jpg",rating:4.7,review_count:32,stock:25,discount_percentage:10},{id:6,name:"Samsung Galaxy S21 Screen Assembly",slug:"samsung-galaxy-s21-screen-assembly",price:119.99,category_name:"Samsung Parts",image_url:"/images/products/samsung-screen.jpg",rating:4.5,review_count:18,stock:12,discount_percentage:0},{id:7,name:"iPad Mini 6 Digitizer",slug:"ipad-mini-6-digitizer",price:89.99,category_name:"iPad Parts",image_url:"/images/products/ipad-digitizer.jpg",rating:4.3,review_count:14,stock:8,discount_percentage:5},{id:8,name:"Precision Screwdriver Set",slug:"precision-screwdriver-set",price:29.99,category_name:"Repair Tools",image_url:"/images/products/screwdriver-set.jpg",rating:4.9,review_count:47,stock:35,discount_percentage:0}];return(({1:[5,3,8],2:[6,3,8],3:[1,6,8],4:[7,3,8],5:[1,3,8],6:[2,3,8],7:[4,3,8],8:[1,6,3]})[e]||[]).map(e=>r.find(t=>t.id===e)).filter(Boolean).slice(0,t)}},80197:function(e,t,r){"use strict";r.d(t,{HS:function(){return o},J8:function(){return i},U3:function(){return a},Z8:function(){return s},fT:function(){return c},nO:function(){return n},rw:function(){return l}});let a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;try{if(!e||""===e.trim())return;let a=n(),i={query:e.trim().toLowerCase(),timestamp:Date.now(),filters:t||{},resultsCount:r,sessionId:u()};a.unshift(i);let o=a.slice(0,100);localStorage.setItem("searchHistory",JSON.stringify(o)),d(i)}catch(e){console.error("Error tracking search:",e)}},i=(e,t,r)=>{try{if(!e||!t)return;let a=o(),i={query:e.trim().toLowerCase(),productId:t,position:r,timestamp:Date.now(),sessionId:u()};a.unshift(i);let n=a.slice(0,100);localStorage.setItem("searchClicks",JSON.stringify(n)),g(i)}catch(e){console.error("Error tracking search result click:",e)}},n=()=>{try{let e=localStorage.getItem("searchHistory");return e?JSON.parse(e):[]}catch(e){return console.error("Error getting search history:",e),[]}},o=()=>{try{let e=localStorage.getItem("searchClicks");return e?JSON.parse(e):[]}catch(e){return console.error("Error getting search clicks:",e),[]}},s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;try{let t=n().reduce((e,t)=>{let r=t.query;return e[r]=(e[r]||0)+1,e},{});return Object.entries(t).map(e=>{let[t,r]=e;return{query:t,count:r}}).sort((e,t)=>t.count-e.count).slice(0,e)}catch(e){return console.error("Error getting popular searches:",e),[]}},c=()=>{try{let e=n().filter(e=>0===e.resultsCount).reduce((e,t)=>{let r=t.query;return e[r]=(e[r]||0)+1,e},{});return Object.entries(e).map(e=>{let[t,r]=e;return{query:t,count:r}}).sort((e,t)=>t.count-e.count)}catch(e){return console.error("Error getting zero-result searches:",e),[]}},l=()=>{try{let e=n(),t=o();if(0===e.length)return 0;return t.length/e.length}catch(e){return console.error("Error calculating search conversion rate:",e),0}},u=()=>{let e=sessionStorage.getItem("searchSessionId");return e||(e="session_".concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,9)),sessionStorage.setItem("searchSessionId",e)),e},d=async e=>{},g=async e=>{}},32821:function(e){e.exports={lazyImageContainer:"LazyImage_lazyImageContainer__nrugC",placeholder:"LazyImage_placeholder__xvEon",actualImage:"LazyImage_actualImage__f72BI",hidden:"LazyImage_hidden__b97nL",visible:"LazyImage_visible__rDSZ7"}},73963:function(e){e.exports={productCard:"ProductCard_productCard__kFgss",productImageContainer:"ProductCard_productImageContainer__t8w75",productImage:"ProductCard_productImage__G8kaD",discountBadge:"ProductCard_discountBadge__JTVHy",productActions:"ProductCard_productActions__QlDKC",visible:"ProductCard_visible___Jybh",quickViewButton:"ProductCard_quickViewButton__AqNIn",wishlistButton:"ProductCard_wishlistButton__v47xi",productContent:"ProductCard_productContent__zkitG",productCategory:"ProductCard_productCategory__NUsjG",productName:"ProductCard_productName__Dz1Yx",productRating:"ProductCard_productRating__CsgKm",reviewCount:"ProductCard_reviewCount__w5kXc",productPrice:"ProductCard_productPrice__C_RF9",originalPrice:"ProductCard_originalPrice__9aLmN",currentPrice:"ProductCard_currentPrice__Lag0w",productButtons:"ProductCard_productButtons__xzFaE",viewDetailsButton:"ProductCard_viewDetailsButton__hjiDc",addToCartButton:"ProductCard_addToCartButton__2EnvJ"}},38624:function(e){e.exports={starRating:"StarRating_starRating__YWLzN",star:"StarRating_star__1QlCd",interactive:"StarRating_interactive__oIQlS",small:"StarRating_small__ZKOs9",medium:"StarRating_medium___jERf",large:"StarRating_large__tTAz5",emptyStar:"StarRating_emptyStar__A53vx",fillContainer:"StarRating_fillContainer__w267h",filledStar:"StarRating_filledStar__c97S5",ratingText:"StarRating_ratingText__9iuvC"}}}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7330],{97330:function(e,t,r){"use strict";r.r(t);var i=r(85893),a=r(67294);r(41664);var s=r(48640),c=r(86272),n=r.n(c);t.default=e=>{let{currentProductId:t,limit:r=4,title:c="Recently Viewed",subtitle:l="Products you've viewed recently"}=e,[o,d]=(0,a.useState)([]),[p,u]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{let e=async()=>{try{u(!0);let e=JSON.parse(localStorage.getItem("recentlyViewed")||"[]"),i=t?e.filter(e=>e!==t):e;if(0===i.length){d([{id:1,name:"iPhone 13 Pro OLED Screen",slug:"iphone-13-pro-oled-screen",price:129.99,category_name:"iPhone Parts",image_url:"/images/products/iphone-screen.jpg",rating:4.5,review_count:28,stock:15},{id:2,name:"Samsung Galaxy S22 Battery",slug:"samsung-galaxy-s22-battery",price:39.99,category_name:"Samsung Parts",image_url:"/images/products/samsung-battery.jpg",rating:4.2,review_count:17,stock:23},{id:3,name:"Professional Repair Tool Kit",slug:"professional-repair-tool-kit",price:89.99,category_name:"Repair Tools",image_url:"/images/products/repair-tools.jpg",rating:4.8,review_count:42,stock:8},{id:4,name:'iPad Pro 12.9" LCD Assembly',slug:"ipad-pro-12-9-lcd-assembly",price:199.99,category_name:"iPad Parts",image_url:"/images/products/ipad-screen.jpg",rating:4.6,review_count:13,stock:5}]),u(!1);return}let a=i.slice(0,r),s=await fetch("/api/products/batch?ids=".concat(a.join(",")));if(!s.ok)throw Error("Failed to fetch recently viewed products");let c=await s.json();d(c)}catch(e){console.error("Error loading recently viewed products:",e),d([])}finally{u(!1)}};t&&(()=>{if(t)try{let e=JSON.parse(localStorage.getItem("recentlyViewed")||"[]").filter(e=>e!==t);e.unshift(t);let r=e.slice(0,20);localStorage.setItem("recentlyViewed",JSON.stringify(r))}catch(e){console.error("Error updating recently viewed products:",e)}})(),e()},[t,r]),p)?(0,i.jsx)("div",{className:n().recentlyViewedLoading,children:(0,i.jsx)("div",{className:n().loadingSpinner})}):0===o.length?null:(0,i.jsx)("section",{className:n().recentlyViewed,children:(0,i.jsxs)("div",{className:"container",children:[(0,i.jsx)("h2",{className:n().title,children:c}),(0,i.jsx)("p",{className:n().subtitle,children:l}),(0,i.jsx)("div",{className:n().products,children:o.map(e=>(0,i.jsx)("div",{className:n().productWrapper,children:(0,i.jsx)(s.Z,{product:e})},e.id))})]})})}},86272:function(e){e.exports={recentlyViewed:"RecentlyViewed_recentlyViewed__OmErO",title:"RecentlyViewed_title__87hHT",subtitle:"RecentlyViewed_subtitle__5jRvp",products:"RecentlyViewed_products__JWSWp",productWrapper:"RecentlyViewed_productWrapper__hvr0m",recentlyViewedLoading:"RecentlyViewed_recentlyViewedLoading__VJ3hL",loadingSpinner:"RecentlyViewed_loadingSpinner__84sbq",spin:"RecentlyViewed_spin__J5rUJ"}}}]);
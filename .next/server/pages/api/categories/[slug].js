"use strict";(()=>{var e={};e.id=3236,e.ids=[3236],e.modules={20145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},56249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,n){return n in t?t[n]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,n)):"function"==typeof t&&"default"===n?t:void 0}}})},4354:(e,t,n)=>{n.r(t),n.d(t,{config:()=>u,default:()=>c,routeModule:()=>g});var o={};n.r(o),n.d(o,{default:()=>l});var s=n(71802),r=n(47153),a=n(56249),i=n(51004);async function l(e,t){try{let{slug:n}=e.query;if(!n)return t.status(400).json({success:!1,message:"Category slug is required"});let o=await (0,i.getCategoryBySlug)(n);if(!o)return t.status(404).json({success:!1,message:"Category not found"});let s=parseInt(e.query.page)||1,r=parseInt(e.query.limit)||20,a=await (0,i.getProducts)(s,r,n);t.status(200).json({success:!0,category:o,products:a,pagination:{page:s,limit:r}})}catch(e){console.error("API Error:",e),t.status(500).json({success:!1,message:"Internal server error",error:void 0})}}let c=(0,a.l)(o,"default"),u=(0,a.l)(o,"config"),g=new s.PagesAPIRouteModule({definition:{kind:r.x.PAGES_API,page:"/api/categories/[slug]",pathname:"/api/categories/[slug]",bundlePath:"",filename:""},userland:o})},51004:(e,t,n)=>{n.r(t),n.d(t,{createUser:()=>a,default:()=>p,getCategories:()=>y,getCategoryBySlug:()=>g,getConnection:()=>s,getProductBySlug:()=>P,getProducts:()=>d,getUserByEmail:()=>i,getUserById:()=>l,pool:()=>u,query:()=>o,transaction:()=>r,updateUser:()=>c});let o=async(e,t=[])=>(console.log(`Database query: ${e}`,t),{rows:[],rowCount:0}),s=async()=>(console.log("Getting database connection"),{query:o,release:()=>console.log("Connection released")}),r=async e=>{console.log("Starting database transaction");let t=await s();try{await t.query("BEGIN");let n=await e(t);return await t.query("COMMIT"),n}catch(e){throw await t.query("ROLLBACK"),e}finally{t.release()}},a=async e=>(console.log("Creating user:",e),{id:"mock-user-id",...e}),i=async e=>(console.log("Getting user by email:",e),null),l=async e=>(console.log("Getting user by ID:",e),null),c=async(e,t)=>(console.log("Updating user:",e,t),{id:e,...t}),u={query:async(e,t=[])=>(console.log(`Pool query: ${e}`,t),{rows:[],rowCount:0}),connect:async()=>(console.log("Pool connection established"),{query:async(e,t=[])=>(console.log(`Connection query: ${e}`,t),{rows:[],rowCount:0}),release:()=>console.log("Connection released")})},g=async e=>(console.log(`Getting category by slug: ${e}`),{id:1,name:"iPhone Parts",slug:e,description:"High-quality iPhone replacement parts"}),y=async()=>(console.log("Getting all categories"),[{id:1,name:"iPhone Parts",slug:"iphone-parts"},{id:2,name:"Samsung Parts",slug:"samsung-parts"},{id:3,name:"iPad Parts",slug:"ipad-parts"},{id:4,name:"Tools",slug:"tools"}]),d=async(e={})=>(console.log("Getting products with filters:",e),[{id:1,name:"iPhone 15 Pro Screen",slug:"iphone-15-pro-screen",price:299.99,category:"iPhone Parts"},{id:2,name:"Samsung S24 Battery",slug:"samsung-s24-battery",price:89.99,category:"Samsung Parts"}]),P=async e=>(console.log(`Getting product by slug: ${e}`),{id:1,name:"iPhone 15 Pro Screen",slug:e,price:299.99,description:"High-quality OLED screen replacement for iPhone 15 Pro",category:"iPhone Parts"}),p={query:o,getConnection:s,transaction:r,createUser:a,getUserByEmail:i,getUserById:l,updateUser:c,pool:u,getCategoryBySlug:g,getCategories:y,getProducts:d,getProductBySlug:P}},47153:(e,t)=>{var n;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return n}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(n||(n={}))},71802:(e,t,n)=>{e.exports=n(20145)}};var t=require("../../../webpack-api-runtime.js");t.C(e);var n=t(t.s=4354);module.exports=n})();
"use strict";(()=>{var e={};e.id=5034,e.ids=[5034],e.modules={967:(e,t,n)=>{n.d(t,{dz:()=>r});let r={query:async(e,t=[])=>(console.log(`Utils pool query: ${e}`,t),{rows:[],rowCount:0}),connect:async()=>(console.log("Utils pool connection established"),{query:async(e,t=[])=>(console.log(`Utils connection query: ${e}`,t),{rows:[],rowCount:0}),release:()=>console.log("Utils connection released")})},o=async(e,t=[])=>(console.log(`Utils database query: ${e}`,t),{rows:[],rowCount:0})},8667:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return n}});var n=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},18394:(e,t,n)=>{n.a(e,async(e,r)=>{try{n.r(t),n.d(t,{default:()=>c});var o=n(967),s=n(22418),a=e([s]);async function c(e,t){if("POST"!==e.method)return t.status(405).json({message:"Method not allowed"});try{let{userId:n}=e.body;if(!n)return t.status(400).json({message:"User ID is required"});let r=(0,s.v4)(),a=`
      INSERT INTO chatbot_conversations (
        id,
        user_id,
        created_at,
        updated_at,
        status
      ) 
      VALUES ($1, $2, $3, $4, $5)
      RETURNING id
    `;try{return await o.dz.query(a,[r,n,new Date,new Date,"active"]),t.status(200).json({success:!0,conversationId:r})}catch(e){return console.error("Database error:",e),t.status(200).json({success:!0,conversationId:r,stored:!1})}}catch(e){return console.error("Error creating conversation:",e),t.status(500).json({success:!1,message:"Internal server error",conversationId:(0,s.v4)()})}}s=(a.then?(await a)():a)[0],r()}catch(e){r(e)}})},22418:e=>{e.exports=import("uuid")},33480:(e,t,n)=>{e.exports=n(75600)},53802:(e,t,n)=>{n.a(e,async(e,r)=>{try{n.r(t),n.d(t,{config:()=>l,default:()=>u,routeModule:()=>d});var o=n(33480),s=n(8667),a=n(86435),c=n(18394),i=e([c]);c=(i.then?(await i)():i)[0];let u=(0,a.M)(c,"default"),l=(0,a.M)(c,"config"),d=new o.PagesAPIRouteModule({definition:{kind:s.A.PAGES_API,page:"/api/chatbot/conversation",pathname:"/api/chatbot/conversation",bundlePath:"",filename:""},userland:c});r()}catch(e){r(e)}})},75600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},86435:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,n){return n in t?t[n]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,n)):"function"==typeof t&&"default"===n?t:void 0}}})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var n=t(t.s=53802);module.exports=n})();
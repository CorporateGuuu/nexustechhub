"use strict";(()=>{var e={};e.id=3471,e.ids=[3471],e.modules={20145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},46555:e=>{e.exports=import("uuid")},56249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,n){return n in t?t[n]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,n)):"function"==typeof t&&"default"===n?t:void 0}}})},35046:(e,t,n)=>{n.a(e,async(e,r)=>{try{n.r(t),n.d(t,{config:()=>l,default:()=>u,routeModule:()=>d});var o=n(71802),s=n(47153),a=n(56249),c=n(91580),i=e([c]);c=(i.then?(await i)():i)[0];let u=(0,a.l)(c,"default"),l=(0,a.l)(c,"config"),d=new o.PagesAPIRouteModule({definition:{kind:s.x.PAGES_API,page:"/api/chatbot/conversation",pathname:"/api/chatbot/conversation",bundlePath:"",filename:""},userland:c});r()}catch(e){r(e)}})},91580:(e,t,n)=>{n.a(e,async(e,r)=>{try{n.r(t),n.d(t,{default:()=>c});var o=n(80544),s=n(46555),a=e([s]);async function c(e,t){if("POST"!==e.method)return t.status(405).json({message:"Method not allowed"});try{let{userId:n}=e.body;if(!n)return t.status(400).json({message:"User ID is required"});let r=(0,s.v4)(),a=`
      INSERT INTO chatbot_conversations (
        id,
        user_id,
        created_at,
        updated_at,
        status
      ) 
      VALUES ($1, $2, $3, $4, $5)
      RETURNING id
    `;try{return await o.d_.query(a,[r,n,new Date,new Date,"active"]),t.status(200).json({success:!0,conversationId:r})}catch(e){return console.error("Database error:",e),t.status(200).json({success:!0,conversationId:r,stored:!1})}}catch(e){return console.error("Error creating conversation:",e),t.status(500).json({success:!1,message:"Internal server error",conversationId:(0,s.v4)()})}}s=(a.then?(await a)():a)[0],r()}catch(e){r(e)}})},80544:(e,t,n)=>{n.d(t,{d_:()=>r});let r={query:async(e,t=[])=>(console.log(`Utils pool query: ${e}`,t),{rows:[],rowCount:0}),connect:async()=>(console.log("Utils pool connection established"),{query:async(e,t=[])=>(console.log(`Utils connection query: ${e}`,t),{rows:[],rowCount:0}),release:()=>console.log("Utils connection released")})}},47153:(e,t)=>{var n;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return n}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(n||(n={}))},71802:(e,t,n)=>{e.exports=n(20145)}};var t=require("../../../webpack-api-runtime.js");t.C(e);var n=t(t.s=35046);module.exports=n})();
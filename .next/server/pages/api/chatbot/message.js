"use strict";(()=>{var e={};e.id=1140,e.ids=[1140],e.modules={967:(e,s,r)=>{r.d(s,{dz:()=>o});let o={query:async(e,s=[])=>(console.log(`Utils pool query: ${e}`,s),{rows:[],rowCount:0}),connect:async()=>(console.log("Utils pool connection established"),{query:async(e,s=[])=>(console.log(`Utils connection query: ${e}`,s),{rows:[],rowCount:0}),release:()=>console.log("Utils connection released")})},a=async(e,s=[])=>(console.log(`Utils database query: ${e}`,s),{rows:[],rowCount:0})},8667:(e,s)=>{Object.defineProperty(s,"A",{enumerable:!0,get:function(){return r}});var r=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},28527:(e,s,r)=>{r.d(s,{Ph:()=>o});let o=async(e,s=null)=>{console.log(`Processing message: "${e}" from user ${s||"anonymous"}`);let r=e.toLowerCase(),o="";return{response:r.includes("hello")||r.includes("hi")?"Hello! Welcome to Nexus TechHub. How can I help you with your phone repair needs today?":r.includes("price")||r.includes("cost")?"Our prices are very competitive! Please check our product pages for specific pricing, or contact us at +971 58 553 1029 for a quote.":r.includes("shipping")||r.includes("delivery")?"We offer fast shipping across the UAE! Orders are typically delivered within 1-2 business days in Ras Al Khaimah and surrounding areas.":r.includes("warranty")?"All our parts come with manufacturer warranty. Contact us for specific warranty terms for your product.":r.includes("iphone")?"We have a wide selection of iPhone parts including screens, batteries, cameras, and more. What specific iPhone model are you looking for?":r.includes("samsung")?"We stock Samsung Galaxy parts for most popular models. What Samsung device do you need parts for?":r.includes("repair")?"We offer professional repair services at our Ras Al Khaimah location. You can also purchase parts for DIY repairs with our detailed guides.":r.includes("location")||r.includes("address")?"We are located at Compass Building, Al Shohada Road, AL Hamra Industrial Zone-FZ, Ras Al Khaimah, United Arab Emirates.":r.includes("contact")||r.includes("phone")?"You can reach us at +971 58 553 1029 or email support@nexustechhub.ae. Our hours are Sunday-Thursday 9AM-6PM GST.":"Thank you for your message! For specific inquiries, please contact us at +971 58 553 1029 or visit our store in Ras Al Khaimah. How else can I help you?",confidence:.95,intent:"general_inquiry",timestamp:new Date().toISOString(),userId:s}}},33480:(e,s,r)=>{e.exports=r(75600)},75600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},86435:(e,s)=>{Object.defineProperty(s,"M",{enumerable:!0,get:function(){return function e(s,r){return r in s?s[r]:"then"in s&&"function"==typeof s.then?s.then(s=>e(s,r)):"function"==typeof s&&"default"===r?s:void 0}}})},94895:(e,s,r)=>{r.r(s),r.d(s,{config:()=>d,default:()=>l,routeModule:()=>p});var o={};r.r(o),r.d(o,{default:()=>c});var a=r(33480),t=r(8667),n=r(86435),i=r(967),u=r(28527);async function c(e,s){if("POST"!==e.method)return s.status(405).json({message:"Method not allowed"});try{let{conversationId:r,message:o,userId:a}=e.body;if(!r||!o)return s.status(400).json({success:!1,message:"Conversation ID and message are required"});let t=`
      INSERT INTO chatbot_messages (
        conversation_id,
        role,
        content,
        created_at
      ) 
      VALUES ($1, $2, $3, $4)
      RETURNING id
    `;try{await i.dz.query(t,[r,"user",o,new Date])}catch(e){console.error("Database error storing user message:",e)}let n=await (0,u.Ph)(o,r,a);try{await i.dz.query(t,[r,"assistant",n,new Date]),await i.dz.query(`
        UPDATE chatbot_conversations
        SET updated_at = $1
        WHERE id = $2
      `,[new Date,r])}catch(e){console.error("Database error storing AI response:",e)}return s.status(200).json({success:!0,reply:n})}catch(e){return console.error("Error processing message:",e),s.status(200).json({success:!0,reply:"I'm sorry, I'm having trouble processing your request right now. Please try again or contact our support team at support@mdtstech.store if you need immediate assistance."})}}let l=(0,n.M)(o,"default"),d=(0,n.M)(o,"config"),p=new a.PagesAPIRouteModule({definition:{kind:t.A.PAGES_API,page:"/api/chatbot/message",pathname:"/api/chatbot/message",bundlePath:"",filename:""},userland:o})}};var s=require("../../../webpack-api-runtime.js");s.C(e);var r=s(s.s=94895);module.exports=r})();
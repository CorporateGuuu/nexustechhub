"use strict";(()=>{var e={};e.id=7443,e.ids=[7443],e.modules={5486:e=>{e.exports=require("bcrypt")},8667:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return s}});var s=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},33480:(e,t,s)=>{e.exports=s(75600)},75217:(e,t,s)=>{s.r(t),s.d(t,{createUser:()=>o,default:()=>P,getCategories:()=>d,getCategoryBySlug:()=>g,getConnection:()=>a,getProductBySlug:()=>m,getProducts:()=>y,getUserByEmail:()=>i,getUserById:()=>l,pool:()=>u,query:()=>r,transaction:()=>n,updateUser:()=>c});let r=async(e,t=[])=>(console.log(`Database query: ${e}`,t),{rows:[],rowCount:0}),a=async()=>(console.log("Getting database connection"),{query:r,release:()=>console.log("Connection released")}),n=async e=>{console.log("Starting database transaction");let t=await a();try{await t.query("BEGIN");let s=await e(t);return await t.query("COMMIT"),s}catch(e){throw await t.query("ROLLBACK"),e}finally{t.release()}},o=async e=>(console.log("Creating user:",e),{id:"mock-user-id",...e}),i=async e=>(console.log("Getting user by email:",e),null),l=async e=>(console.log("Getting user by ID:",e),null),c=async(e,t)=>(console.log("Updating user:",e,t),{id:e,...t}),u={query:async(e,t=[])=>(console.log(`Pool query: ${e}`,t),{rows:[],rowCount:0}),connect:async()=>(console.log("Pool connection established"),{query:async(e,t=[])=>(console.log(`Connection query: ${e}`,t),{rows:[],rowCount:0}),release:()=>console.log("Connection released")})},g=async e=>(console.log(`Getting category by slug: ${e}`),{id:1,name:"iPhone Parts",slug:e,description:"High-quality iPhone replacement parts"}),d=async()=>(console.log("Getting all categories"),[{id:1,name:"iPhone Parts",slug:"iphone-parts"},{id:2,name:"Samsung Parts",slug:"samsung-parts"},{id:3,name:"iPad Parts",slug:"ipad-parts"},{id:4,name:"Tools",slug:"tools"}]),y=async(e={})=>(console.log("Getting products with filters:",e),[{id:1,name:"iPhone 15 Pro Screen",slug:"iphone-15-pro-screen",price:299.99,category:"iPhone Parts"},{id:2,name:"Samsung S24 Battery",slug:"samsung-s24-battery",price:89.99,category:"Samsung Parts"}]),m=async e=>(console.log(`Getting product by slug: ${e}`),{id:1,name:"iPhone 15 Pro Screen",slug:e,price:299.99,description:"High-quality OLED screen replacement for iPhone 15 Pro",category:"iPhone Parts"}),P={query:r,getConnection:a,transaction:n,createUser:o,getUserByEmail:i,getUserById:l,updateUser:c,pool:u,getCategoryBySlug:g,getCategories:d,getProducts:y,getProductBySlug:m}},75600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},76955:(e,t,s)=>{s.r(t),s.d(t,{config:()=>d,default:()=>g,routeModule:()=>y});var r={};s.r(r),s.d(r,{default:()=>u});var a=s(33480),n=s(8667),o=s(86435),i=s(5486),l=s.n(i),c=s(75217);async function u(e,t){if("POST"!==e.method)return t.status(405).json({success:!1,message:"Method not allowed"});try{let{name:s,email:r,password:a}=e.body;if(!r||!a)return t.status(400).json({success:!1,message:"Missing required fields"});if(a.length<8)return t.status(400).json({success:!1,message:"Password must be at least 8 characters long"});if((await (0,c.query)("SELECT * FROM users WHERE email = $1",[r])).rows.length>0)return t.status(409).json({success:!1,message:"User with this email already exists"});let n=await l().hash(a,10),o="",i="";if(s){let e=s.trim().split(" ");o=e[0],i=e.length>1?e.slice(1).join(" "):""}let u=(await (0,c.query)("INSERT INTO users (first_name, last_name, email, password_hash) VALUES ($1, $2, $3, $4) RETURNING id, first_name, last_name, email, created_at",[o,i,r,n])).rows[0];return t.status(201).json({success:!0,message:"User registered successfully",user:{id:u.id,name:`${u.first_name} ${u.last_name}`.trim(),email:u.email,created_at:u.created_at}})}catch(e){return console.error("Registration error:",e),t.status(500).json({success:!1,message:"Internal server error"})}}let g=(0,o.M)(r,"default"),d=(0,o.M)(r,"config"),y=new a.PagesAPIRouteModule({definition:{kind:n.A.PAGES_API,page:"/api/auth/register",pathname:"/api/auth/register",bundlePath:"",filename:""},userland:r})},86435:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,s){return s in t?t[s]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,s)):"function"==typeof t&&"default"===s?t:void 0}}})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var s=t(t.s=76955);module.exports=s})();
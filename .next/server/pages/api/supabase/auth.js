"use strict";(()=>{var e={};e.id=8807,e.ids=[8807],e.modules={20145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},56249:(e,r)=>{Object.defineProperty(r,"l",{enumerable:!0,get:function(){return function e(r,s){return s in r?r[s]:"then"in r&&"function"==typeof r.then?r.then(r=>e(r,s)):"function"==typeof r&&"default"===s?r:void 0}}})},34142:(e,r,s)=>{s.r(r),s.d(r,{config:()=>c,default:()=>l,routeModule:()=>d});var t={};s.r(t),s.d(t,{default:()=>u});var a=s(71802),n=s(47153),o=s(56249),i=s(98456);async function u(e,r){if("POST"!==e.method)return r.status(405).json({success:!1,message:"Method not allowed"});{let{action:s}=e.query;if("signup"===s)try{let{email:s,password:t,name:a}=e.body;if(!s||!t)return r.status(400).json({success:!1,message:"Email and password are required"});let n="",o="";if(a){let e=a.trim().split(" ");n=e[0],o=e.length>1?e.slice(1).join(" "):""}let{data:u,error:l}=await i.ZP.auth.signUp({email:s,password:t,options:{data:{first_name:n,last_name:o}}});if(l)throw l;return r.status(201).json({success:!0,message:"User registered successfully. Check your email for confirmation.",user:{id:u.user.id,email:u.user.email,name:`${n} ${o}`.trim()}})}catch(e){return console.error("Signup error:",e),r.status(500).json({success:!1,message:e.message||"Error during signup"})}else if("signin"===s)try{let{email:s,password:t}=e.body;if(!s||!t)return r.status(400).json({success:!1,message:"Email and password are required"});let{data:a,error:n}=await i.ZP.auth.signInWithPassword({email:s,password:t});if(n)throw n;return r.status(200).json({success:!0,message:"User signed in successfully",user:a.user,session:a.session})}catch(e){return console.error("Signin error:",e),r.status(500).json({success:!1,message:e.message||"Error during signin"})}else if("signout"!==s)return r.status(400).json({success:!1,message:"Invalid action"});else try{let{error:e}=await i.ZP.auth.signOut();if(e)throw e;return r.status(200).json({success:!0,message:"User signed out successfully"})}catch(e){return console.error("Signout error:",e),r.status(500).json({success:!1,message:e.message||"Error during signout"})}}}let l=(0,o.l)(t,"default"),c=(0,o.l)(t,"config"),d=new a.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/supabase/auth",pathname:"/api/supabase/auth",bundlePath:"",filename:""},userland:t})},98456:(e,r,s)=>{s.d(r,{ZP:()=>n,fU:()=>a});let t={auth:{signUp:async e=>(console.log("Supabase signUp:",e),{data:{user:{id:"mock-user-id",email:e.email}},error:null}),signInWithPassword:async e=>(console.log("Supabase signIn:",e),{data:{user:{id:"mock-user-id",email:e.email}},error:null}),signOut:async()=>(console.log("Supabase signOut"),{error:null}),getUser:async()=>(console.log("Supabase getUser"),{data:{user:{id:"mock-user-id",email:"demo@example.com"}},error:null})},from:e=>({select:(e="*")=>({eq:(e,r)=>({data:[],error:null}),order:(e,r)=>({data:[],error:null}),limit:e=>({data:[],error:null}),data:[],error:null}),insert:e=>({data:Array.isArray(e)?e:[e],error:null}),update:e=>({eq:(r,s)=>({data:[e],error:null})}),delete:()=>({eq:(e,r)=>({data:[],error:null})})})},a=(e,r)=>(console.log("Creating server Supabase client"),t),n={supabase:t,createClient:(e,r)=>(console.log("Creating Supabase client"),t),createServerSupabaseClient:a,getProducts:async(e={})=>(console.log("Getting products from Supabase:",e),{data:[{id:1,name:"iPhone 15 Pro Screen Assembly",price:299.99,stock:25,category:"iPhone Parts",image:"/images/products/iphone-15-pro-screen.jpg"},{id:2,name:"Samsung Galaxy S24 Battery",price:89.99,stock:50,category:"Samsung Parts",image:"/images/products/samsung-s24-battery.jpg"}],error:null}),getProduct:async e=>(console.log(`Getting product ${e} from Supabase`),{data:{id:e,name:"iPhone 15 Pro Screen Assembly",price:299.99,stock:25,category:"iPhone Parts",description:"High-quality OLED screen assembly for iPhone 15 Pro",image:"/images/products/iphone-15-pro-screen.jpg"},error:null}),createProduct:async e=>(console.log("Creating product in Supabase:",e),{data:{id:Date.now(),...e,created_at:new Date().toISOString()},error:null}),updateProduct:async(e,r)=>(console.log(`Updating product ${e} in Supabase:`,r),{data:{id:e,...r,updated_at:new Date().toISOString()},error:null}),getCart:async e=>(console.log(`Getting cart for user ${e} from Supabase`),{data:[],error:null}),addToCart:async(e,r,s)=>(console.log(`Adding to cart: user ${e}, product ${r}, qty ${s}`),{data:{id:Date.now(),user_id:e,product_id:r,quantity:s,created_at:new Date().toISOString()},error:null}),updateCartItem:async(e,r)=>(console.log(`Updating cart item ${e} to quantity ${r}`),{data:{id:e,quantity:r,updated_at:new Date().toISOString()},error:null}),removeFromCart:async e=>(console.log(`Removing cart item ${e}`),{data:null,error:null})}},47153:(e,r)=>{var s;Object.defineProperty(r,"x",{enumerable:!0,get:function(){return s}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(s||(s={}))},71802:(e,r,s)=>{e.exports=s(20145)}};var r=require("../../../webpack-api-runtime.js");r.C(e);var s=r(r.s=34142);module.exports=s})();
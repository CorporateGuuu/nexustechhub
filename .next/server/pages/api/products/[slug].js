"use strict";(()=>{var e={};e.id=8087,e.ids=[8087],e.modules={20145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},56249:(e,o)=>{Object.defineProperty(o,"l",{enumerable:!0,get:function(){return function e(o,a){return a in o?o[a]:"then"in o&&"function"==typeof o.then?o.then(o=>e(o,a)):"function"==typeof o&&"default"===a?o:void 0}}})},70076:(e,o,a)=>{a.r(o),a.d(o,{config:()=>u,default:()=>l,routeModule:()=>d});var t={};a.r(t),a.d(t,{default:()=>c});var s=a(71802),n=a(47153),r=a(56249),i=a(51004);async function c(e,o){try{let a;let{slug:t}=e.query;if(!t)return o.status(400).json({success:!1,message:"Product slug is required"});try{a=await (0,i.getProductBySlug)(t)}catch(e){console.error("Database error:",e),a=null}a||(a=function(e){let o=e.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),a="Accessories",t="accessories";e.includes("iphone")?(a="iPhone Parts",t="iphone-parts"):e.includes("samsung")?(a="Samsung Parts",t="samsung-parts"):e.includes("ipad")?(a="iPad Parts",t="ipad-parts"):e.includes("macbook")?(a="MacBook Parts",t="macbook-parts"):e.includes("tool")&&(a="Repair Tools",t="repair-tools");let s=parseFloat((180*Math.random()+20).toFixed(2)),n=Math.random()>.5,r=n?Math.floor(30*Math.random())+5:0,i=n?parseFloat((s*(1-r/100)).toFixed(2)):s;return{id:Math.floor(1e4*Math.random())+1,name:o,slug:e,description:`This is a high-quality ${o} for device repair. Perfect for professional repair shops and DIY enthusiasts.`,price:s,discount_percentage:r,discounted_price:i,stock_status:Math.random()>.2?"In Stock":"Out of Stock",category_id:Math.floor(5*Math.random())+1,category_name:a,category_slug:t,sku:`SKU-${Math.floor(1e4*Math.random())}`,image_url:`/images/products/${Math.floor(10*Math.random())+1}.jpg`,is_featured:Math.random()>.7,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),specifications:{brand:e.includes("iphone")||e.includes("ipad")||e.includes("macbook")?"Apple":e.includes("samsung")?"Samsung":"Generic",compatibility:e.includes("iphone")?"iPhone models":e.includes("samsung")?"Samsung Galaxy models":e.includes("ipad")?"iPad models":e.includes("macbook")?"MacBook models":"Various devices",warranty:"90 days",condition:"New",material:"Premium quality"}}}(t)),o.status(200).json({success:!0,product:a})}catch(e){console.error("API Error:",e),o.status(500).json({success:!1,message:"Internal server error",error:void 0})}}let l=(0,r.l)(t,"default"),u=(0,r.l)(t,"config"),d=new s.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/products/[slug]",pathname:"/api/products/[slug]",bundlePath:"",filename:""},userland:t})},51004:(e,o,a)=>{a.r(o),a.d(o,{createUser:()=>r,default:()=>y,getCategories:()=>g,getCategoryBySlug:()=>d,getConnection:()=>s,getProductBySlug:()=>m,getProducts:()=>p,getUserByEmail:()=>i,getUserById:()=>c,pool:()=>u,query:()=>t,transaction:()=>n,updateUser:()=>l});let t=async(e,o=[])=>(console.log(`Database query: ${e}`,o),{rows:[],rowCount:0}),s=async()=>(console.log("Getting database connection"),{query:t,release:()=>console.log("Connection released")}),n=async e=>{console.log("Starting database transaction");let o=await s();try{await o.query("BEGIN");let a=await e(o);return await o.query("COMMIT"),a}catch(e){throw await o.query("ROLLBACK"),e}finally{o.release()}},r=async e=>(console.log("Creating user:",e),{id:"mock-user-id",...e}),i=async e=>(console.log("Getting user by email:",e),null),c=async e=>(console.log("Getting user by ID:",e),null),l=async(e,o)=>(console.log("Updating user:",e,o),{id:e,...o}),u={query:async(e,o=[])=>(console.log(`Pool query: ${e}`,o),{rows:[],rowCount:0}),connect:async()=>(console.log("Pool connection established"),{query:async(e,o=[])=>(console.log(`Connection query: ${e}`,o),{rows:[],rowCount:0}),release:()=>console.log("Connection released")})},d=async e=>(console.log(`Getting category by slug: ${e}`),{id:1,name:"iPhone Parts",slug:e,description:"High-quality iPhone replacement parts"}),g=async()=>(console.log("Getting all categories"),[{id:1,name:"iPhone Parts",slug:"iphone-parts"},{id:2,name:"Samsung Parts",slug:"samsung-parts"},{id:3,name:"iPad Parts",slug:"ipad-parts"},{id:4,name:"Tools",slug:"tools"}]),p=async(e={})=>(console.log("Getting products with filters:",e),[{id:1,name:"iPhone 15 Pro Screen",slug:"iphone-15-pro-screen",price:299.99,category:"iPhone Parts"},{id:2,name:"Samsung S24 Battery",slug:"samsung-s24-battery",price:89.99,category:"Samsung Parts"}]),m=async e=>(console.log(`Getting product by slug: ${e}`),{id:1,name:"iPhone 15 Pro Screen",slug:e,price:299.99,description:"High-quality OLED screen replacement for iPhone 15 Pro",category:"iPhone Parts"}),y={query:t,getConnection:s,transaction:n,createUser:r,getUserByEmail:i,getUserById:c,updateUser:l,pool:u,getCategoryBySlug:d,getCategories:g,getProducts:p,getProductBySlug:m}},47153:(e,o)=>{var a;Object.defineProperty(o,"x",{enumerable:!0,get:function(){return a}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(a||(a={}))},71802:(e,o,a)=>{e.exports=a(20145)}};var o=require("../../../webpack-api-runtime.js");o.C(e);var a=o(o.s=70076);module.exports=a})();
"use strict";(()=>{var e={};e.id=7221,e.ids=[7221],e.modules={20145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},56249:(e,n)=>{Object.defineProperty(n,"l",{enumerable:!0,get:function(){return function e(n,o){return o in n?n[o]:"then"in n&&"function"==typeof n.then?n.then(n=>e(n,o)):"function"==typeof n&&"default"===o?n:void 0}}})},84710:(e,n,o)=>{o.r(n),o.d(n,{config:()=>u,default:()=>c,routeModule:()=>g});var t={};o.r(t),o.d(t,{default:()=>l});var r=o(71802),a=o(47153),s=o(56249),i=o(51004);async function l(e,n){try{let o=parseInt(e.query.page)||1,t=parseInt(e.query.limit)||20,r=e.query.category||null,a=await (0,i.getProducts)(o,t,r);n.status(200).json({success:!0,products:a,pagination:{page:o,limit:t,category:r}})}catch(e){console.error("API Error:",e),n.status(500).json({success:!1,message:"Internal server error",error:void 0})}}let c=(0,s.l)(t,"default"),u=(0,s.l)(t,"config"),g=new r.PagesAPIRouteModule({definition:{kind:a.x.PAGES_API,page:"/api/products",pathname:"/api/products",bundlePath:"",filename:""},userland:t})},51004:(e,n,o)=>{o.r(n),o.d(n,{createUser:()=>s,default:()=>p,getCategories:()=>d,getCategoryBySlug:()=>g,getConnection:()=>r,getProductBySlug:()=>P,getProducts:()=>y,getUserByEmail:()=>i,getUserById:()=>l,pool:()=>u,query:()=>t,transaction:()=>a,updateUser:()=>c});let t=async(e,n=[])=>(console.log(`Database query: ${e}`,n),{rows:[],rowCount:0}),r=async()=>(console.log("Getting database connection"),{query:t,release:()=>console.log("Connection released")}),a=async e=>{console.log("Starting database transaction");let n=await r();try{await n.query("BEGIN");let o=await e(n);return await n.query("COMMIT"),o}catch(e){throw await n.query("ROLLBACK"),e}finally{n.release()}},s=async e=>(console.log("Creating user:",e),{id:"mock-user-id",...e}),i=async e=>(console.log("Getting user by email:",e),null),l=async e=>(console.log("Getting user by ID:",e),null),c=async(e,n)=>(console.log("Updating user:",e,n),{id:e,...n}),u={query:async(e,n=[])=>(console.log(`Pool query: ${e}`,n),{rows:[],rowCount:0}),connect:async()=>(console.log("Pool connection established"),{query:async(e,n=[])=>(console.log(`Connection query: ${e}`,n),{rows:[],rowCount:0}),release:()=>console.log("Connection released")})},g=async e=>(console.log(`Getting category by slug: ${e}`),{id:1,name:"iPhone Parts",slug:e,description:"High-quality iPhone replacement parts"}),d=async()=>(console.log("Getting all categories"),[{id:1,name:"iPhone Parts",slug:"iphone-parts"},{id:2,name:"Samsung Parts",slug:"samsung-parts"},{id:3,name:"iPad Parts",slug:"ipad-parts"},{id:4,name:"Tools",slug:"tools"}]),y=async(e={})=>(console.log("Getting products with filters:",e),[{id:1,name:"iPhone 15 Pro Screen",slug:"iphone-15-pro-screen",price:299.99,category:"iPhone Parts"},{id:2,name:"Samsung S24 Battery",slug:"samsung-s24-battery",price:89.99,category:"Samsung Parts"}]),P=async e=>(console.log(`Getting product by slug: ${e}`),{id:1,name:"iPhone 15 Pro Screen",slug:e,price:299.99,description:"High-quality OLED screen replacement for iPhone 15 Pro",category:"iPhone Parts"}),p={query:t,getConnection:r,transaction:a,createUser:s,getUserByEmail:i,getUserById:l,updateUser:c,pool:u,getCategoryBySlug:g,getCategories:d,getProducts:y,getProductBySlug:P}},47153:(e,n)=>{var o;Object.defineProperty(n,"x",{enumerable:!0,get:function(){return o}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(o||(o={}))},71802:(e,n,o)=>{e.exports=o(20145)}};var n=require("../../webpack-api-runtime.js");n.C(e);var o=n(n.s=84710);module.exports=o})();
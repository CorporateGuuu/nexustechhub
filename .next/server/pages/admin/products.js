(()=>{var e={};e.id=8209,e.ids=[8209,2888],e.modules={62390:e=>{e.exports={container:"AdminPages_container__nj6XB",pageHeader:"AdminPages_pageHeader__LHSBG",addButton:"AdminPages_addButton__3YV2v",filterBar:"AdminPages_filterBar__fJxVO",filterGroup:"AdminPages_filterGroup__CvemU",select:"AdminPages_select__5v_Ue",searchForm:"AdminPages_searchForm__DxHvp",searchInput:"AdminPages_searchInput__czn7m",searchButton:"AdminPages_searchButton__HrKq3",tableContainer:"AdminPages_tableContainer__EZ3Ac",table:"AdminPages_table__KVh8N",sortableColumn:"AdminPages_sortableColumn___99vU",activeSortColumn:"AdminPages_activeSortColumn__pPIua",sortIcon:"AdminPages_sortIcon__tiBuk",imageColumn:"AdminPages_imageColumn__m3_De",imageCell:"AdminPages_imageCell__ahCj4",productImage:"AdminPages_productImage__8KMQy",stockBadge:"AdminPages_stockBadge__Uquo4",inStock:"AdminPages_inStock__4D2jV",lowStock:"AdminPages_lowStock__JQmaX",outOfStock:"AdminPages_outOfStock__PVOkV",stockCount:"AdminPages_stockCount__CJVuo",actions:"AdminPages_actions__5NUWv",actionButton:"AdminPages_actionButton__A25EK",editButton:"AdminPages_editButton__xhIdN",deleteButton:"AdminPages_deleteButton__wFOYO",ordersButton:"AdminPages_ordersButton__nuIHY",updateButton:"AdminPages_updateButton__TKzfU",statusBadge:"AdminPages_statusBadge__vf_aR",statusPending:"AdminPages_statusPending__uo129",statusProcessing:"AdminPages_statusProcessing__mabVA",statusShipped:"AdminPages_statusShipped__Jc_6I",statusDelivered:"AdminPages_statusDelivered__falDE",statusCancelled:"AdminPages_statusCancelled__fxl2i",statusDropdown:"AdminPages_statusDropdown__FTpQA",dropdownContent:"AdminPages_dropdownContent__4sAyN",activeStatus:"AdminPages_activeStatus__rh9Cs",noData:"AdminPages_noData__Mc9eU",pagination:"AdminPages_pagination__1uxxQ",paginationButton:"AdminPages_paginationButton__kiY8c",pageInfo:"AdminPages_pageInfo__XD0jp",loading:"AdminPages_loading__zLU2R",spinner:"AdminPages_spinner__lVOQO",spin:"AdminPages_spin__s6LXq",settingsContainer:"AdminPages_settingsContainer__yidTp",settingsTabs:"AdminPages_settingsTabs__Iw9Zr",tabButton:"AdminPages_tabButton__Swz33",activeTab:"AdminPages_activeTab___YGm8",settingsContent:"AdminPages_settingsContent__5zi5i",settingsForm:"AdminPages_settingsForm__6w8pE",formGroup:"AdminPages_formGroup__MbgWF",input:"AdminPages_input__NjzSf",textarea:"AdminPages_textarea__zm7h5",checkboxLabel:"AdminPages_checkboxLabel__QnbQ4",helpText:"AdminPages_helpText__6QXDW",formRow:"AdminPages_formRow__vrK66",formActions:"AdminPages_formActions__6_1in",saveButton:"AdminPages_saveButton__aoM8K",successMessage:"AdminPages_successMessage__42J_F",errorMessage:"AdminPages_errorMessage__CBbWX",shippingRate:"AdminPages_shippingRate__4pZsF",removeButton:"AdminPages_removeButton__k0hN8",paymentSection:"AdminPages_paymentSection___O13P",securitySection:"AdminPages_securitySection__lvIFb",testButton:"AdminPages_testButton__Xov_6"}},89800:(e,t,s)=>{"use strict";s.r(t),s.d(t,{config:()=>C,default:()=>v,getServerSideProps:()=>k,getStaticPaths:()=>f,getStaticProps:()=>b,reportWebVitals:()=>B,routeModule:()=>q,unstable_getServerProps:()=>I,unstable_getServerSideProps:()=>F,unstable_getStaticParams:()=>y,unstable_getStaticPaths:()=>w,unstable_getStaticProps:()=>N});var a={};s.r(a),s.d(a,{default:()=>S,getServerSideProps:()=>j});var n=s(87093),i=s(35244),o=s(1323),r=s(65949),c=s(14239),d=s(20997),l=s(16689);s(25675);var u=s(41649),_=s(11163),m=s(40968),g=s.n(m),p=s(41664),h=s.n(p),P=s(79046),x=s(62390),A=s.n(x);function S(){let{data:e}=(0,u.useSession)(),[t,s]=(0,l.useState)([]),[a,n]=(0,l.useState)(!0),[i,o]=(0,l.useState)("all"),[r,c]=(0,l.useState)(""),[m,p]=(0,l.useState)("name"),[x,S]=(0,l.useState)("asc"),[j,v]=(0,l.useState)(1),[b,f]=(0,l.useState)(1);async function k(){try{n(!0);let e=new URLSearchParams;e.append("filter",i),e.append("search",r),e.append("sortBy",m),e.append("sortOrder",x),e.append("page",j),e.append("limit",10);let t=await fetch(`/api/admin/products?${e.toString()}`);if(!t.ok)throw Error("Failed to fetch products");let a=await t.json();s(a.products),f(a.totalPages),n(!1)}catch(e){console.error("Error fetching products:",e),n(!1)}}(0,_.useRouter)();let C=e=>{m===e?S("asc"===x?"desc":"asc"):(p(e),S("asc")),v(1)},B=e=>{e>=1&&e<=b&&v(e)},N=async e=>{if(window.confirm("Are you sure you want to delete this product?"))try{if(!(await fetch(`/api/admin/products/${e}`,{method:"DELETE"})).ok)throw Error("Failed to delete product");k()}catch(e){console.error("Error deleting product:",e),alert("Failed to delete product. Please try again.")}};return(0,d.jsxs)(d.Fragment,{children:[d.jsx(g(),{children:d.jsx("title",{children:"Products | Admin Dashboard"})}),(0,d.jsxs)(P.Z,{children:[(0,d.jsxs)("div",{className:A().pageHeader,children:[d.jsx("h1",{children:"Products"}),d.jsx(h(),{href:"/admin/products/new",className:A().addButton,children:"Add New Product"})]}),(0,d.jsxs)("div",{className:A().filterBar,children:[(0,d.jsxs)("div",{className:A().filterGroup,children:[d.jsx("label",{htmlFor:"filter",children:"Filter:"}),(0,d.jsxs)("select",{id:"filter",value:i,onChange:e=>{o(e.target.value),v(1)},className:A().select,children:[d.jsx("option",{value:"all",children:"All Products"}),d.jsx("option",{value:"in-stock",children:"In Stock"}),d.jsx("option",{value:"low-stock",children:"Low Stock"}),d.jsx("option",{value:"out-of-stock",children:"Out of Stock"}),d.jsx("option",{value:"featured",children:"Featured"}),d.jsx("option",{value:"new",children:"New Arrivals"})]})]}),(0,d.jsxs)("form",{onSubmit:e=>{e.preventDefault(),v(1),k()},className:A().searchForm,children:[d.jsx("input",{type:"text",placeholder:"Search products...",value:r,onChange:e=>{c(e.target.value)},className:A().searchInput}),d.jsx("button",{type:"submit",className:A().searchButton,children:"Search"})]})]}),a?(0,d.jsxs)("div",{className:A().loading,children:[d.jsx("div",{className:A().spinner}),d.jsx("p",{children:"Loading products..."})]}):(0,d.jsxs)(d.Fragment,{children:[d.jsx("div",{className:A().tableContainer,children:(0,d.jsxs)("table",{className:A().table,children:[d.jsx("thead",{children:(0,d.jsxs)("tr",{children:[d.jsx("th",{className:A().imageColumn,children:"Image"}),(0,d.jsxs)("th",{className:`${A().sortableColumn} ${"name"===m?A().activeSortColumn:""}`,onClick:()=>C("name"),children:["Product Name","name"===m&&d.jsx("span",{className:A().sortIcon,children:"asc"===x?"↑":"↓"})]}),(0,d.jsxs)("th",{className:`${A().sortableColumn} ${"price"===m?A().activeSortColumn:""}`,onClick:()=>C("price"),children:["Price","price"===m&&d.jsx("span",{className:A().sortIcon,children:"asc"===x?"↑":"↓"})]}),(0,d.jsxs)("th",{className:`${A().sortableColumn} ${"category"===m?A().activeSortColumn:""}`,onClick:()=>C("category"),children:["Category","category"===m&&d.jsx("span",{className:A().sortIcon,children:"asc"===x?"↑":"↓"})]}),(0,d.jsxs)("th",{className:`${A().sortableColumn} ${"stock"===m?A().activeSortColumn:""}`,onClick:()=>C("stock"),children:["Stock","stock"===m&&d.jsx("span",{className:A().sortIcon,children:"asc"===x?"↑":"↓"})]}),d.jsx("th",{children:"Actions"})]})}),d.jsx("tbody",{children:t.length>0?t.map(e=>(0,d.jsxs)("tr",{children:[d.jsx("td",{className:A().imageCell,children:d.jsx("img",{src:e.image_url||"/images/placeholder.jpg",alt:e.name,className:A().productImage})}),d.jsx("td",{children:e.name}),(0,d.jsxs)("td",{children:["$",e.price.toFixed(2)]}),d.jsx("td",{children:e.category_name}),(0,d.jsxs)("td",{children:[d.jsx("span",{className:`${A().stockBadge} ${e.stock_quantity<=0?A().outOfStock:e.stock_quantity<=5?A().lowStock:A().inStock}`,children:e.stock_quantity<=0?"Out of Stock":e.stock_quantity<=5?"Low Stock":"In Stock"}),(0,d.jsxs)("span",{className:A().stockCount,children:["(",e.stock_quantity,")"]})]}),(0,d.jsxs)("td",{className:A().actions,children:[d.jsx(h(),{href:`/admin/products/${e.id}`,className:A().actionButton,children:"View"}),d.jsx(h(),{href:`/admin/products/${e.id}/edit`,className:`${A().actionButton} ${A().editButton}`,children:"Edit"}),d.jsx("button",{onClick:()=>N(e.id),className:`${A().actionButton} ${A().deleteButton}`,children:"Delete"})]})]},e.id)):d.jsx("tr",{children:d.jsx("td",{colSpan:"6",className:A().noData,children:"No products found"})})})]})}),(0,d.jsxs)("div",{className:A().pagination,children:[d.jsx("button",{onClick:()=>B(1),disabled:1===j,className:A().paginationButton,children:"First"}),d.jsx("button",{onClick:()=>B(j-1),disabled:1===j,className:A().paginationButton,children:"Previous"}),(0,d.jsxs)("span",{className:A().pageInfo,children:["Page ",j," of ",b]}),d.jsx("button",{onClick:()=>B(j+1),disabled:j===b,className:A().paginationButton,children:"Next"}),d.jsx("button",{onClick:()=>B(b),disabled:j===b,className:A().paginationButton,children:"Last"})]})]})]})]})}async function j(e){let t=await (0,u.getSession)(e);return t?{props:{session:t}}:{redirect:{destination:"/auth/signin?callbackUrl=/admin/products",permanent:!1}}}let v=(0,o.l)(a,"default"),b=(0,o.l)(a,"getStaticProps"),f=(0,o.l)(a,"getStaticPaths"),k=(0,o.l)(a,"getServerSideProps"),C=(0,o.l)(a,"config"),B=(0,o.l)(a,"reportWebVitals"),N=(0,o.l)(a,"unstable_getStaticProps"),w=(0,o.l)(a,"unstable_getStaticPaths"),y=(0,o.l)(a,"unstable_getStaticParams"),I=(0,o.l)(a,"unstable_getServerProps"),F=(0,o.l)(a,"unstable_getServerSideProps"),q=new n.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/admin/products",pathname:"/admin/products",bundlePath:"",filename:""},components:{App:c.default,Document:r.default},userland:a})},41649:e=>{"use strict";e.exports=require("next-auth/react")},62785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},40968:e=>{"use strict";e.exports=require("next/head")},16689:e=>{"use strict";e.exports=require("react")},66405:e=>{"use strict";e.exports=require("react-dom")},20997:e=>{"use strict";e.exports=require("react/jsx-runtime")},92048:e=>{"use strict";e.exports=require("fs")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},71568:e=>{"use strict";e.exports=require("zlib")}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[4567,1859,6859,8559,5675,4239,2218],()=>s(89800));module.exports=a})();
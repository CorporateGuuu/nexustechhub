(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6904],{4353:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/search-analytics",function(){return s(16619)}])},16619:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return j}});var n=s(85893),i=s(67294),t=s(33299),r=s(11163),c=s(9008),d=s.n(c),l=s(41664),o=s.n(l),h=s(15748),_=s.n(h);let m=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return console.log("Getting popular searches (limit: ".concat(e,")")),["iphone screen","samsung battery","repair tools","ipad parts","phone case","charging cable","screen protector","wireless charger","phone stand","bluetooth headphones"].slice(0,e)},u=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return console.log("Getting search history for user ".concat(e||"all"," (limit: ").concat(a,")")),{searches:[{id:1,query:"iphone 15 screen",user_id:e,results_count:12,clicked_result:!0,timestamp:"2024-01-15T10:30:00Z"},{id:2,query:"samsung s24 battery",user_id:e,results_count:8,clicked_result:!1,timestamp:"2024-01-15T09:15:00Z"}],total:2,page:1,limit:a}},b=async(e,a)=>(console.log("Getting zero result searches from ".concat(e," to ").concat(a)),{searches:[{query:"nokia parts",count:23,last_searched:"2024-01-14T15:20:00Z"},{query:"blackberry screen",count:12,last_searched:"2024-01-13T11:45:00Z"},{query:"windows phone battery",count:8,last_searched:"2024-01-12T16:30:00Z"}],total:43,period:{start:e,end:a}}),x=async(e,a)=>(console.log("Getting search conversion rate from ".concat(e," to ").concat(a)),{overall_conversion_rate:.68,total_searches:1250,searches_with_clicks:850,searches_with_purchases:156,purchase_conversion_rate:.125,top_converting_queries:[{query:"iphone 15 pro screen",searches:89,clicks:78,purchases:23,conversion_rate:.295},{query:"samsung s24 ultra battery",searches:67,clicks:58,purchases:18,conversion_rate:.269},{query:"professional repair kit",searches:45,clicks:41,purchases:12,conversion_rate:.267}],period:{start:e,end:a}});function j(){let{data:e,status:a}=(0,t.useSession)(),s=(0,r.useRouter)(),[c,l]=(0,i.useState)("overview"),[h,j]=(0,i.useState)({recentSearches:[],popularSearches:[],zeroResultSearches:[],conversionRate:0}),[v,p]=(0,i.useState)(!0);(0,i.useEffect)(()=>{"loading"===a||e&&e.user.isAdmin||s.push("/auth/signin?callbackUrl=/admin/search-analytics")},[e,a,s]),(0,i.useEffect)(()=>{let e=()=>{p(!0);try{let e=u().slice(0,20),a=m(10),s=b().slice(0,10),n=x();j({recentSearches:e,popularSearches:a,zeroResultSearches:s,conversionRate:n})}catch(e){console.error("Error loading search analytics:",e)}finally{p(!1)}};e();let a=setInterval(e,3e4);return()=>clearInterval(a)},[]);let A=e=>new Date(e).toLocaleString();return"loading"===a||v?(0,n.jsxs)("div",{className:_().loadingContainer,children:[(0,n.jsx)("div",{className:_().spinner}),(0,n.jsx)("p",{children:"Loading search analytics..."})]}):e&&e.user.isAdmin?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(d(),{children:[(0,n.jsx)("title",{children:"Search Analytics | Nexus TechHub Admin"}),(0,n.jsx)("meta",{name:"description",content:"Search analytics dashboard for Nexus TechHub admin"})]}),(0,n.jsxs)("div",{className:_().adminContainer,children:[(0,n.jsxs)("div",{className:_().adminSidebar,children:[(0,n.jsx)("h2",{className:_().adminLogo,children:"Nexus TechHub Admin"}),(0,n.jsxs)("nav",{className:_().adminNav,children:[(0,n.jsx)(o(),{href:"/admin",className:_().adminNavItem,children:"Dashboard"}),(0,n.jsx)(o(),{href:"/admin/products",className:_().adminNavItem,children:"Products"}),(0,n.jsx)(o(),{href:"/admin/orders",className:_().adminNavItem,children:"Orders"}),(0,n.jsx)(o(),{href:"/admin/customers",className:_().adminNavItem,children:"Customers"}),(0,n.jsx)(o(),{href:"/admin/search-analytics",className:"".concat(_().adminNavItem," ").concat(_().active),children:"Search Analytics"})]})]}),(0,n.jsxs)("div",{className:_().adminContent,children:[(0,n.jsxs)("header",{className:_().adminHeader,children:[(0,n.jsx)("h1",{children:"Search Analytics"}),(0,n.jsx)("div",{className:_().adminUser,children:(0,n.jsx)("span",{children:e.user.name||e.user.email})})]}),(0,n.jsxs)("div",{className:_().adminTabs,children:[(0,n.jsx)("button",{className:"".concat(_().adminTab," ").concat("overview"===c?_().activeTab:""),onClick:()=>l("overview"),children:"Overview"}),(0,n.jsx)("button",{className:"".concat(_().adminTab," ").concat("recent"===c?_().activeTab:""),onClick:()=>l("recent"),children:"Recent Searches"}),(0,n.jsx)("button",{className:"".concat(_().adminTab," ").concat("popular"===c?_().activeTab:""),onClick:()=>l("popular"),children:"Popular Searches"}),(0,n.jsx)("button",{className:"".concat(_().adminTab," ").concat("zero"===c?_().activeTab:""),onClick:()=>l("zero"),children:"Zero Results"})]}),(0,n.jsxs)("div",{className:_().adminTabContent,children:["overview"===c&&(0,n.jsxs)("div",{className:_().overviewTab,children:[(0,n.jsxs)("div",{className:_().statsGrid,children:[(0,n.jsxs)("div",{className:_().statCard,children:[(0,n.jsx)("h3",{children:"Total Searches"}),(0,n.jsx)("div",{className:_().statValue,children:h.recentSearches.length})]}),(0,n.jsxs)("div",{className:_().statCard,children:[(0,n.jsx)("h3",{children:"Conversion Rate"}),(0,n.jsxs)("div",{className:_().statValue,children:[(100*h.conversionRate).toFixed(2),"%"]})]}),(0,n.jsxs)("div",{className:_().statCard,children:[(0,n.jsx)("h3",{children:"Zero Result Searches"}),(0,n.jsx)("div",{className:_().statValue,children:h.zeroResultSearches.length})]}),(0,n.jsxs)("div",{className:_().statCard,children:[(0,n.jsx)("h3",{children:"Unique Search Terms"}),(0,n.jsx)("div",{className:_().statValue,children:new Set(h.recentSearches.map(e=>e.query)).size})]})]}),(0,n.jsxs)("div",{className:_().overviewCharts,children:[(0,n.jsxs)("div",{className:_().chartCard,children:[(0,n.jsx)("h3",{children:"Top 5 Searches"}),(0,n.jsx)("div",{className:_().barChart,children:h.popularSearches.slice(0,5).map((e,a)=>{var s;return(0,n.jsxs)("div",{className:_().barChartItem,children:[(0,n.jsx)("div",{className:_().barLabel,children:e.query}),(0,n.jsxs)("div",{className:_().barContainer,children:[(0,n.jsx)("div",{className:_().bar,style:{width:"".concat(Math.min(100,e.count/((null===(s=h.popularSearches[0])||void 0===s?void 0:s.count)||1)*100),"%")}}),(0,n.jsx)("div",{className:_().barValue,children:e.count})]})]},a)})})]}),(0,n.jsxs)("div",{className:_().chartCard,children:[(0,n.jsx)("h3",{children:"Top Zero Result Searches"}),(0,n.jsx)("div",{className:_().barChart,children:h.zeroResultSearches.slice(0,5).map((e,a)=>{var s;return(0,n.jsxs)("div",{className:_().barChartItem,children:[(0,n.jsx)("div",{className:_().barLabel,children:e.query}),(0,n.jsxs)("div",{className:_().barContainer,children:[(0,n.jsx)("div",{className:"".concat(_().bar," ").concat(_().redBar),style:{width:"".concat(Math.min(100,e.count/((null===(s=h.zeroResultSearches[0])||void 0===s?void 0:s.count)||1)*100),"%")}}),(0,n.jsx)("div",{className:_().barValue,children:e.count})]})]},a)})})]})]})]}),"recent"===c&&(0,n.jsx)("div",{className:_().recentTab,children:(0,n.jsx)("div",{className:_().tableContainer,children:(0,n.jsxs)("table",{className:_().dataTable,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Query"}),(0,n.jsx)("th",{children:"Timestamp"}),(0,n.jsx)("th",{children:"Results"}),(0,n.jsx)("th",{children:"Filters"}),(0,n.jsx)("th",{children:"Session ID"})]})}),(0,n.jsx)("tbody",{children:h.recentSearches.map((e,a)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.query}),(0,n.jsx)("td",{children:A(e.timestamp)}),(0,n.jsx)("td",{children:e.resultsCount}),(0,n.jsx)("td",{children:Object.keys(e.filters||{}).length>0?(0,n.jsxs)("details",{children:[(0,n.jsx)("summary",{children:"View Filters"}),(0,n.jsx)("pre",{children:JSON.stringify(e.filters,null,2)})]}):"None"}),(0,n.jsx)("td",{children:e.sessionId})]},a))})]})})}),"popular"===c&&(0,n.jsx)("div",{className:_().popularTab,children:(0,n.jsx)("div",{className:_().tableContainer,children:(0,n.jsxs)("table",{className:_().dataTable,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Query"}),(0,n.jsx)("th",{children:"Search Count"}),(0,n.jsx)("th",{children:"Actions"})]})}),(0,n.jsx)("tbody",{children:h.popularSearches.map((e,a)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.query}),(0,n.jsx)("td",{children:e.count}),(0,n.jsx)("td",{children:(0,n.jsx)(o(),{href:"/search?q=".concat(encodeURIComponent(e.query)),className:_().actionButton,target:"_blank",children:"View Results"})})]},a))})]})})}),"zero"===c&&(0,n.jsxs)("div",{className:_().zeroTab,children:[(0,n.jsx)("div",{className:_().tableContainer,children:(0,n.jsxs)("table",{className:_().dataTable,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Query"}),(0,n.jsx)("th",{children:"Search Count"}),(0,n.jsx)("th",{children:"Actions"})]})}),(0,n.jsx)("tbody",{children:h.zeroResultSearches.map((e,a)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.query}),(0,n.jsx)("td",{children:e.count}),(0,n.jsx)("td",{children:(0,n.jsx)(o(),{href:"/admin/products/new?suggested_name=".concat(encodeURIComponent(e.query)),className:_().actionButton,children:"Create Product"})})]},a))})]})}),(0,n.jsxs)("div",{className:_().zeroResultsActions,children:[(0,n.jsx)("h3",{children:"Recommendations"}),(0,n.jsx)("p",{children:"Based on zero-result searches, consider adding these products or categories:"}),(0,n.jsx)("ul",{className:_().recommendationsList,children:h.zeroResultSearches.slice(0,5).map((e,a)=>(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:e.query})," - Searched ",e.count," times with no results"]},a))})]})]})]})]})]})]}):null}},15748:function(e){e.exports={adminContainer:"Admin_adminContainer__fnIiy",adminSidebar:"Admin_adminSidebar__ECUVT",adminLogo:"Admin_adminLogo__KRj8V",adminNav:"Admin_adminNav__6VV7e",adminNavItem:"Admin_adminNavItem__vGP0q",active:"Admin_active__BhXLC",adminContent:"Admin_adminContent__la1bh",adminHeader:"Admin_adminHeader__D8Awi",adminUser:"Admin_adminUser__9UhpZ",adminTabs:"Admin_adminTabs__cqvDR",adminTab:"Admin_adminTab__W_1Cu",activeTab:"Admin_activeTab__fvtdm",adminTabContent:"Admin_adminTabContent__2Pyru",loadingContainer:"Admin_loadingContainer__co6Jm",spinner:"Admin_spinner__UFXHG",spin:"Admin_spin__Ah3vg",statsGrid:"Admin_statsGrid__TB_yj",statCard:"Admin_statCard__TRCV8",statValue:"Admin_statValue__7vDB_",overviewCharts:"Admin_overviewCharts__CbCXN",chartCard:"Admin_chartCard__nhG5d",barChart:"Admin_barChart__P7yDX",barChartItem:"Admin_barChartItem__upy5l",barLabel:"Admin_barLabel__zg5pf",barContainer:"Admin_barContainer__rV5lJ",bar:"Admin_bar__KT2HJ",redBar:"Admin_redBar__Ux63t",barValue:"Admin_barValue__by0tg",tableContainer:"Admin_tableContainer__jS7Fw",dataTable:"Admin_dataTable__HJk6Z",actionButton:"Admin_actionButton__UMz0P",zeroResultsActions:"Admin_zeroResultsActions__a8LFP",recommendationsList:"Admin_recommendationsList__kt0vF",marketplacesTab:"Admin_marketplacesTab__F1B_G",tabDescription:"Admin_tabDescription__4232R",productsTab:"Admin_productsTab__c7E0b",ordersTab:"Admin_ordersTab__nYVxi",customersTab:"Admin_customersTab__K7_If",settingsTab:"Admin_settingsTab__uKxYF",adminSection:"Admin_adminSection__vTklz",sectionDescription:"Admin_sectionDescription__fkI2f",successMessage:"Admin_successMessage__TfbaZ",errorMessage:"Admin_errorMessage__X7vgq",integrationCards:"Admin_integrationCards__ahfcD",integrationCard:"Admin_integrationCard__UDVVJ",integrationHeader:"Admin_integrationHeader__ZpOSz",integrationLogo:"Admin_integrationLogo__L6Jp1",integrationInfo:"Admin_integrationInfo__xh2eJ",integrationStatus:"Admin_integrationStatus___Iy_i",statusIndicator:"Admin_statusIndicator__71aId",connected:"Admin_connected__7QFvd",disconnected:"Admin_disconnected__Awmdk",integrationBody:"Admin_integrationBody__DHwlP",integrationField:"Admin_integrationField__vCIAg",apiKeyField:"Admin_apiKeyField__Flra0",copyButton:"Admin_copyButton__jtW5y",webhooksList:"Admin_webhooksList__4hKEU",databasesList:"Admin_databasesList__ANXzk",webhookItem:"Admin_webhookItem__TtL6j",databaseItem:"Admin_databaseItem__By6lR",webhookInfo:"Admin_webhookInfo__rvvlE",databaseInfo:"Admin_databaseInfo__5cusK",webhookName:"Admin_webhookName__fRaXr",databaseName:"Admin_databaseName__mbr33",webhookUrl:"Admin_webhookUrl__6HqB3",databaseId:"Admin_databaseId__QqduL",switch:"Admin_switch__9nB1M",slider:"Admin_slider__GAnsH",connectContainer:"Admin_connectContainer__U5lly",connectButton:"Admin_connectButton__x3D79",disconnectButton:"Admin_disconnectButton__NA_DW",integrationHelp:"Admin_integrationHelp__oqKc1"}}},function(e){e.O(0,[1664,2888,9774,179],function(){return e(e.s=4353)}),_N_E=e.O()}]);
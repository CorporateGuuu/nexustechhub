(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6449],{91536:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/supabase-test",function(){return a(52819)}])},52819:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return d}});var t=a(85893),r=a(9008),n=a.n(r),o=a(67294);let l={auth:{signUp:async e=>(console.log("Supabase signUp:",e),{data:{user:{id:"mock-user-id",email:e.email}},error:null}),signInWithPassword:async e=>(console.log("Supabase signIn:",e),{data:{user:{id:"mock-user-id",email:e.email}},error:null}),signOut:async()=>(console.log("Supabase signOut"),{error:null}),getUser:async()=>(console.log("Supabase getUser"),{data:{user:{id:"mock-user-id",email:"demo@example.com"}},error:null})},from:e=>({select:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],{eq:(e,s)=>({data:[],error:null}),order:(e,s)=>({data:[],error:null}),limit:e=>({data:[],error:null}),data:[],error:null}},insert:e=>({data:Array.isArray(e)?e:[e],error:null}),update:e=>({eq:(s,a)=>({data:[e],error:null})}),delete:()=>({eq:(e,s)=>({data:[],error:null})})})};var c={supabase:l,createClient:(e,s)=>(console.log("Creating Supabase client"),l),createServerSupabaseClient:(e,s)=>(console.log("Creating server Supabase client"),l),getProducts:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return console.log("Getting products from Supabase:",e),{data:[{id:1,name:"iPhone 15 Pro Screen Assembly",price:299.99,stock:25,category:"iPhone Parts",image:"/images/products/iphone-15-pro-screen.jpg"},{id:2,name:"Samsung Galaxy S24 Battery",price:89.99,stock:50,category:"Samsung Parts",image:"/images/products/samsung-s24-battery.jpg"}],error:null}},getProduct:async e=>(console.log("Getting product ".concat(e," from Supabase")),{data:{id:e,name:"iPhone 15 Pro Screen Assembly",price:299.99,stock:25,category:"iPhone Parts",description:"High-quality OLED screen assembly for iPhone 15 Pro",image:"/images/products/iphone-15-pro-screen.jpg"},error:null}),createProduct:async e=>(console.log("Creating product in Supabase:",e),{data:{id:Date.now(),...e,created_at:new Date().toISOString()},error:null}),updateProduct:async(e,s)=>(console.log("Updating product ".concat(e," in Supabase:"),s),{data:{id:e,...s,updated_at:new Date().toISOString()},error:null}),getCart:async e=>(console.log("Getting cart for user ".concat(e," from Supabase")),{data:[],error:null}),addToCart:async(e,s,a)=>(console.log("Adding to cart: user ".concat(e,", product ").concat(s,", qty ").concat(a)),{data:{id:Date.now(),user_id:e,product_id:s,quantity:a,created_at:new Date().toISOString()},error:null}),updateCartItem:async(e,s)=>(console.log("Updating cart item ".concat(e," to quantity ").concat(s)),{data:{id:e,quantity:s,updated_at:new Date().toISOString()},error:null}),removeFromCart:async e=>(console.log("Removing cart item ".concat(e)),{data:null,error:null})};function i(){let[e,s]=(0,o.useState)("Checking connection..."),[a,r]=(0,o.useState)(null),[n,l]=(0,o.useState)(null);return(0,o.useEffect)(()=>{(async function(){try{let{data:e,error:a}=await c.rpc("version");if(a)throw a;s("Connected to Supabase"),l(e)}catch(e){console.error("Supabase client connection test failed:",e),s("Failed to connect to Supabase"),r(e.message)}})()},[]),(0,t.jsxs)("div",{className:"p-4 border rounded-lg bg-white shadow-sm",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Supabase Connection Test"}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("p",{className:"font-medium",children:"Status:"}),(0,t.jsx)("p",{className:"".concat(e.includes("Failed")?"text-red-500":e.includes("Connected")?"text-green-500":"text-yellow-500"),children:e})]}),a&&(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("p",{className:"font-medium",children:"Error:"}),(0,t.jsx)("p",{className:"text-red-500",children:a})]}),n&&(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("p",{className:"font-medium",children:"Supabase Version:"}),(0,t.jsx)("pre",{className:"bg-gray-100 p-2 rounded overflow-x-auto",children:JSON.stringify(n,null,2)})]}),(0,t.jsx)("div",{className:"mt-4 text-sm text-gray-500",children:(0,t.jsx)("p",{children:"Note: Make sure your Supabase environment variables are properly set in Netlify."})})]})}function d(){return(0,t.jsxs)("div",{className:"container mx-auto py-8 px-4",children:[(0,t.jsxs)(n(),{children:[(0,t.jsx)("title",{children:"Supabase Connection Test | MDTS"}),(0,t.jsx)("meta",{name:"description",content:"Testing Supabase connection for MDTS"})]}),(0,t.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Supabase Connection Test"}),(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Client-Side Test"}),(0,t.jsx)(i,{})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Server-Side Test"}),(0,t.jsx)(u,{})]})]}),(0,t.jsxs)("div",{className:"mt-8",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Environment Variables"}),(0,t.jsx)(m,{})]})]})}function u(){let[e,s]=(0,o.useState)("Not tested"),[a,r]=(0,o.useState)(null),[n,l]=(0,o.useState)(null),[c,i]=(0,o.useState)(!1),d=async()=>{i(!0),s("Testing..."),r(null),l(null);try{let e=await fetch("/api/supabase/test-connection"),a=await e.json();a.success?(s("Success"),r(a)):(s("Failed"),l(a.error||"Unknown error"))}catch(e){s("Error"),l(e.message)}finally{i(!1)}};return(0,t.jsxs)("div",{className:"p-4 border rounded-lg bg-white shadow-sm",children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("p",{className:"font-medium",children:"Status:"}),(0,t.jsx)("p",{className:"".concat("Success"===e?"text-green-500":"Failed"===e||"Error"===e?"text-red-500":"text-gray-500"),children:e})]}),(0,t.jsx)("button",{onClick:d,disabled:c,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",children:c?"Testing...":"Test Server Connection"}),n&&(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("p",{className:"font-medium",children:"Error:"}),(0,t.jsx)("p",{className:"text-red-500",children:n})]}),a&&(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("p",{className:"font-medium",children:"Result:"}),(0,t.jsx)("pre",{className:"bg-gray-100 p-2 rounded overflow-x-auto",children:JSON.stringify(a,null,2)})]})]})}function m(){return(0,t.jsxs)("div",{className:"p-4 border rounded-lg bg-white shadow-sm",children:[(0,t.jsx)("p",{className:"mb-2",children:"The following environment variables should be set in your Netlify dashboard:"}),(0,t.jsxs)("ul",{className:"list-disc pl-5 space-y-1",children:[(0,t.jsxs)("li",{children:[(0,t.jsx)("code",{className:"bg-gray-100 px-1",children:"NEXT_PUBLIC_SUPABASE_URL"})," - Your Supabase project URL"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("code",{className:"bg-gray-100 px-1",children:"NEXT_PUBLIC_SUPABASE_ANON_KEY"})," - Your Supabase anonymous key"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("code",{className:"bg-gray-100 px-1",children:"SUPABASE_DATABASE_URL"})," - Your Supabase database URL (for server-side)"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("code",{className:"bg-gray-100 px-1",children:"SUPABASE_ANON_KEY"})," - Your Supabase anonymous key (for server-side)"]})]}),(0,t.jsx)("p",{className:"mt-4 text-sm text-gray-500",children:"Note: When connecting through the Netlify UI, these variables should be automatically set."})]})}}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=91536)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4737],{96712:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/wishlist",function(){return s(73077)}])},32602:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{default:function(){return n},noSSR:function(){return a}});let i=s(38754);s(85893),s(67294);let l=i._(s(35491));function r(e){return{default:(null==e?void 0:e.default)||e}}function a(e,t){return delete t.webpack,delete t.modules,e(t)}function n(e,t){let s=l.default,i={loading:e=>{let{error:t,isLoading:s,pastDelay:i}=e;return null}};e instanceof Promise?i.loader=()=>e:"function"==typeof e?i.loader=e:"object"==typeof e&&(i={...i,...e});let n=(i={...i,...t}).loader;return(i.loadableGenerated&&(i={...i,...i.loadableGenerated},delete i.loadableGenerated),"boolean"!=typeof i.ssr||i.ssr)?s({...i,loader:()=>null!=n?n().then(r):Promise.resolve(r(()=>null))}):(delete i.webpack,delete i.modules,a(s,i))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1159:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LoadableContext",{enumerable:!0,get:function(){return i}});let i=s(38754)._(s(67294)).default.createContext(null)},35491:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return h}});let i=s(38754)._(s(67294)),l=s(1159),r=[],a=[],n=!1;function o(e){let t=e(),s={loading:!0,loaded:null,error:null};return s.promise=t.then(e=>(s.loading=!1,s.loaded=e,e)).catch(e=>{throw s.loading=!1,s.error=e,e}),s}class d{promise(){return this._res.promise}retry(){this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};let{_res:e,_opts:t}=this;e.loading&&("number"==typeof t.delay&&(0===t.delay?this._state.pastDelay=!0:this._delay=setTimeout(()=>{this._update({pastDelay:!0})},t.delay)),"number"==typeof t.timeout&&(this._timeout=setTimeout(()=>{this._update({timedOut:!0})},t.timeout))),this._res.promise.then(()=>{this._update({}),this._clearTimeouts()}).catch(e=>{this._update({}),this._clearTimeouts()}),this._update({})}_update(e){this._state={...this._state,error:this._res.error,loaded:this._res.loaded,loading:this._res.loading,...e},this._callbacks.forEach(e=>e())}_clearTimeouts(){clearTimeout(this._delay),clearTimeout(this._timeout)}getCurrentValue(){return this._state}subscribe(e){return this._callbacks.add(e),()=>{this._callbacks.delete(e)}}constructor(e,t){this._loadFn=e,this._opts=t,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}}function u(e){return function(e,t){let s=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null},t),r=null;function o(){if(!r){let t=new d(e,s);r={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return r.promise()}if(!n){let e=s.webpack?s.webpack():s.modules;e&&a.push(t=>{for(let s of e)if(t.includes(s))return o()})}function u(e,t){!function(){o();let e=i.default.useContext(l.LoadableContext);e&&Array.isArray(s.modules)&&s.modules.forEach(t=>{e(t)})}();let a=i.default.useSyncExternalStore(r.subscribe,r.getCurrentValue,r.getCurrentValue);return i.default.useImperativeHandle(t,()=>({retry:r.retry}),[]),i.default.useMemo(()=>{var t;return a.loading||a.error?i.default.createElement(s.loading,{isLoading:a.loading,pastDelay:a.pastDelay,timedOut:a.timedOut,error:a.error,retry:r.retry}):a.loaded?i.default.createElement((t=a.loaded)&&t.default?t.default:t,e):null},[e,a])}return u.preload=()=>o(),u.displayName="LoadableComponent",i.default.forwardRef(u)}(o,e)}function c(e,t){let s=[];for(;e.length;){let i=e.pop();s.push(i(t))}return Promise.all(s).then(()=>{if(e.length)return c(e,t)})}u.preloadAll=()=>new Promise((e,t)=>{c(r).then(e,t)}),u.preloadReady=e=>(void 0===e&&(e=[]),new Promise(t=>{let s=()=>(n=!0,t());c(a,e).then(s,s)})),window.__NEXT_PRELOADREADY=u.preloadReady;let h=u},73077:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var i=s(85893),l=s(67294),r=s(9008),a=s.n(r),n=s(41664),o=s.n(n),d=s(11163),u=s(33299),c=s(41863),h=s(72354),_=s.n(h);function m(){let{data:e,status:t}=(0,u.useSession)();(0,d.useRouter)();let[s,r]=(0,l.useState)([]),[n,h]=(0,l.useState)(!0),[m,p]=(0,l.useState)(null);(0,l.useEffect)(()=>{(async()=>{try{if(h(!0),p(null),"unauthenticated"===t){let e=localStorage.getItem("wishlistItems"),t=e?JSON.parse(e):[];r(t),h(!1);return}r([{id:1,product_id:1,name:"iPhone 13 Pro LCD Screen",slug:"iphone-13-pro-lcd-screen",category:"iPhone Parts",price:89.99,discount_percentage:10,image_url:"/images/products/iphone-screen.jpg",added_at:"2023-05-15T10:30:00Z"},{id:2,product_id:2,name:"Samsung Galaxy S22 Battery",slug:"samsung-galaxy-s22-battery",category:"Samsung Parts",price:39.99,discount_percentage:0,image_url:"/images/products/samsung-battery.jpg",added_at:"2023-05-16T14:45:00Z"},{id:3,product_id:3,name:"Professional Repair Tool Kit",slug:"professional-repair-tool-kit",category:"Repair Tools",price:129.99,discount_percentage:15,image_url:"/images/products/repair-tools.jpg",added_at:"2023-05-18T09:15:00Z"},{id:4,product_id:5,name:'iPad Pro 12.9" LCD Assembly',slug:"ipad-pro-12-9-lcd-assembly",category:"iPad Parts",price:199.99,discount_percentage:5,image_url:"/images/products/ipad-screen.jpg",added_at:"2023-05-20T16:20:00Z"}])}catch(e){console.error("Error fetching wishlist items:",e),p("Failed to load wishlist items. Please try again later.")}finally{h(!1)}})()},[t]);let g=e=>{if(r(s.filter(t=>t.id!==e)),"unauthenticated"===t){let t=s.filter(t=>t.id!==e);localStorage.setItem("wishlistItems",JSON.stringify(t))}},f=async e=>{try{let t=await fetch("/api/cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:e.product_id,quantity:1})});if(!t.ok)throw Error("Failed to add item to cart");let s=await t.json();if(s.success)alert("".concat(e.name," added to cart!"));else throw Error(s.message||"Failed to add item to cart")}catch(e){console.error("Error adding item to cart:",e),alert("Failed to add item to cart. Please try again.")}};return(0,i.jsxs)(c.Z,{children:[(0,i.jsxs)(a(),{children:[(0,i.jsx)("title",{children:"My Wishlist | Nexus TechHub"}),(0,i.jsx)("meta",{name:"description",content:"View and manage your saved items at MDTS - Midas Technical Solutions."})]}),(0,i.jsx)("main",{className:"main-content",children:(0,i.jsx)("div",{className:"container",children:(0,i.jsxs)("div",{className:_().wishlistContainer,children:[(0,i.jsxs)("div",{className:_().wishlistHeader,children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:_().wishlistTitle,children:"My Wishlist"}),(0,i.jsx)("p",{className:_().wishlistSubtitle,children:"Items you've saved for later"})]}),s.length>0&&(0,i.jsx)("button",{onClick:()=>{window.confirm("Are you sure you want to clear your wishlist?")&&(r([]),"unauthenticated"===t&&localStorage.setItem("wishlistItems",JSON.stringify([])))},className:_().clearWishlistButton,children:"Clear Wishlist"})]}),n?(0,i.jsxs)("div",{className:_().loadingContainer,children:[(0,i.jsx)("div",{className:_().loadingSpinner}),(0,i.jsx)("p",{children:"Loading your wishlist..."})]}):m?(0,i.jsxs)("div",{className:_().errorMessage,children:[(0,i.jsx)("p",{children:m}),(0,i.jsx)("button",{onClick:()=>window.location.reload(),className:_().retryButton,children:"Try Again"})]}):0===s.length?(0,i.jsxs)("div",{className:_().emptyWishlist,children:[(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,i.jsx)("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),(0,i.jsx)("h3",{children:"Your wishlist is empty"}),(0,i.jsx)("p",{children:"Save items you're interested in for later."}),(0,i.jsx)(o(),{href:"/products",className:_().browseProductsButton,children:"Browse Products"})]}):(0,i.jsx)("div",{className:_().wishlistGrid,children:s.map(e=>(0,i.jsxs)("div",{className:_().wishlistCard,children:[(0,i.jsxs)("div",{className:_().wishlistImageContainer,children:[(0,i.jsx)("img",{src:e.image_url||"/images/placeholder.svg",alt:e.name,className:_().wishlistImage}),(0,i.jsx)("button",{className:_().removeWishlistItem,onClick:()=>g(e.id),title:"Remove from wishlist",children:(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,i.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,i.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,i.jsxs)("div",{className:_().wishlistContent,children:[(0,i.jsx)("div",{className:_().wishlistCategory,children:e.category}),(0,i.jsx)("h3",{className:_().wishlistName,children:(0,i.jsx)(o(),{href:"/products/".concat(e.slug),children:e.name})}),(0,i.jsx)("div",{className:_().wishlistPrice,children:e.discount_percentage>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("span",{className:_().wishlistOriginalPrice,children:["$",(e.price/(1-e.discount_percentage/100)).toFixed(2)]}),(0,i.jsxs)("span",{className:_().wishlistCurrentPrice,children:["$",e.price.toFixed(2)]})]}):(0,i.jsxs)("span",{className:_().wishlistCurrentPrice,children:["$",e.price.toFixed(2)]})}),(0,i.jsxs)("div",{className:_().wishlistButtons,children:[(0,i.jsx)(o(),{href:"/products/".concat(e.slug),className:_().viewDetailsButton,children:"View Details"}),(0,i.jsx)("button",{className:_().addToCartButton,onClick:()=>f(e),children:"Add to Cart"})]})]})]},e.id))})]})})})]})}},72354:function(e){e.exports={wishlistContainer:"Wishlist_wishlistContainer__mmr3Z",wishlistHeader:"Wishlist_wishlistHeader__hdKuY",wishlistTitle:"Wishlist_wishlistTitle__erS6e",wishlistSubtitle:"Wishlist_wishlistSubtitle__mPpHy",clearWishlistButton:"Wishlist_clearWishlistButton__oWks8",loadingContainer:"Wishlist_loadingContainer__ECOeL",loadingSpinner:"Wishlist_loadingSpinner__ZGTqL",spin:"Wishlist_spin__oEgyN",errorMessage:"Wishlist_errorMessage__iQEv7",retryButton:"Wishlist_retryButton__IhDOj",emptyWishlist:"Wishlist_emptyWishlist___d5eQ",browseProductsButton:"Wishlist_browseProductsButton__qx3lY",wishlistGrid:"Wishlist_wishlistGrid__N3qre",wishlistCard:"Wishlist_wishlistCard__sENLi",wishlistImageContainer:"Wishlist_wishlistImageContainer__m4s3Q",wishlistImage:"Wishlist_wishlistImage__SzmMz",removeWishlistItem:"Wishlist_removeWishlistItem__GIloR",wishlistContent:"Wishlist_wishlistContent__JK8gU",wishlistCategory:"Wishlist_wishlistCategory__O6mD5",wishlistName:"Wishlist_wishlistName__WWz6h",wishlistPrice:"Wishlist_wishlistPrice__VV9Az",wishlistOriginalPrice:"Wishlist_wishlistOriginalPrice__N4gEc",wishlistCurrentPrice:"Wishlist_wishlistCurrentPrice__hUdyf",wishlistButtons:"Wishlist_wishlistButtons__tzWZA",viewDetailsButton:"Wishlist_viewDetailsButton__KMel_",addToCartButton:"Wishlist_addToCartButton__9fFju"}},5152:function(e,t,s){e.exports=s(32602)}},function(e){e.O(0,[1664,5675,1863,2888,9774,179],function(){return e(e.s=96712)}),_N_E=e.O()}]);